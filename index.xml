<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>My Blog</title><link>https://wyq977.github.io/</link><description>Recent content on My Blog</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Mon, 06 Jun 2022 15:27:45 +0300</lastBuildDate><atom:link href="https://wyq977.github.io/index.xml" rel="self" type="application/rss+xml"/><item><title>iMessages/FaceTime logic</title><link>https://wyq977.github.io/p/imessages/facetime-logic/</link><pubDate>Mon, 06 Jun 2022 15:27:45 +0300</pubDate><guid>https://wyq977.github.io/p/imessages/facetime-logic/</guid><description>&lt;p>Problems (2 iPhones and 1 Mac):&lt;/p>
&lt;ul>
&lt;li>Tel. A (main, ✅ iMessages)&lt;/li>
&lt;li>Tel. B (backup, ❌ iMessages)&lt;/li>
&lt;li>email A (login, ✅ iMessages)&lt;/li>
&lt;li>email B (public, ❌ iMessages)&lt;/li>
&lt;/ul>
&lt;h2 id="avoid-spam-text-messages-sync-to-mac-no-texts-from-tel-a">Avoid spam text messages sync to Mac (no TEXTs from Tel. A)&lt;/h2>
&lt;p>disable &amp;ldquo;Enable Messages in iCloud&amp;rdquo;: otherwise texts from &lt;strong>Tel. A&lt;/strong> will be synced&lt;/p>
&lt;h2 id="use-imessage-on-mac">use iMessage on mac&lt;/h2>
&lt;p>&lt;figure
>
&lt;a href="https://wyq977.github.io/images/imessage_mac_setting.png" >
&lt;img src="https://wyq977.github.io/images/imessage_mac_setting.png"
loading="lazy"
>
&lt;/a>
&lt;/figure>&lt;/p>
&lt;p>Check &amp;ldquo;you can be reached for messages at:&amp;rdquo;&lt;/p>
&lt;p>despite you disable in the last setting, iMessages can still arrive while regular text won&amp;rsquo;t.&lt;/p>
&lt;p>Right now I can be reached via the gmail, if I checked the &lt;strong>Tel. A&lt;/strong>, I can also receive iMessage text on my mac&lt;/p>
&lt;h2 id="sync-text-message-on-other-iphone-not-tested">sync TEXT message on other iPhone NOT TESTED&lt;/h2>
&lt;p>both iPhone needs to enable message in iCloud,&lt;/p>
&lt;p>I think you need to enable iMessage for the other phone number, not sure tho&lt;/p>
&lt;p>update on 2022-04-28, I received a text message (07:55) from &lt;strong>Tel. B&lt;/strong> on 11:15 WTF?&lt;/p>
&lt;h2 id="updated-2022-06-06">Updated 2022-06-06&lt;/h2>
&lt;p>On main iPhone with Tel A, I can still receive text from Tel. B on another phone&amp;hellip;&lt;/p></description></item><item><title>VSCode Latex Mac</title><link>https://wyq977.github.io/p/vscode-latex-mac/</link><pubDate>Thu, 02 Jun 2022 15:32:31 +0300</pubDate><guid>https://wyq977.github.io/p/vscode-latex-mac/</guid><description>&lt;h2 id="using-latex-on-macos">Using Latex on macOS&lt;/h2>
&lt;p>Download MacTex (~3/4 GB with most packages included), via homebrew, support for Apple Silicon&lt;/p>
&lt;h2 id="guide">Guide&lt;/h2>
&lt;p>I followed mostly &lt;a class="link" href="http://homepages.rpi.edu/home/36/wangy52/public_html/PersonalWebsite/build/html/Misc/Mac/VSCode/VSCode-LaTeX.html" target="_blank" rel="noopener"
>VSCODE CONFIG LATEX (MAC)&lt;/a>, which is quite comprehensive and easy to follow.&lt;/p>
&lt;p>The only adjustment I need is the directory for skim location &lt;code>/opt/homebrew/bin/&lt;/code> if installed via homebrew.&lt;/p>
&lt;p>Also don&amp;rsquo;t delete &lt;code>syntex.gz&lt;/code> file as it&amp;rsquo;s required for bi-directional jumping between VSCode and Skim.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// latex
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="s2">&amp;#34;latex-workshop.view.pdf.viewer&amp;#34;&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="s2">&amp;#34;external&amp;#34;&lt;/span>&lt;span class="err">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;latex-workshop.view.pdf.external.viewer.command&amp;#34;&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="s2">&amp;#34;/opt/homebrew/bin/displayline&amp;#34;&lt;/span>&lt;span class="err">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;latex-workshop.view.pdf.external.viewer.args&amp;#34;&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;0&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;%PDF%&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>&lt;span class="err">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;latex-workshop.view.pdf.external.synctex.command&amp;#34;&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="s2">&amp;#34;/opt/homebrew/bin/displayline&amp;#34;&lt;/span>&lt;span class="err">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;latex-workshop.view.pdf.external.synctex.args&amp;#34;&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;-r&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;%LINE%&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;%PDF%&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;%TEX%&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>&lt;span class="err">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;latex-workshop.latex.clean.fileTypes&amp;#34;&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;*.aux&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;*.bbl&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;*.blg&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;*.idx&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;*.ind&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;*.lof&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;*.lot&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;*.out&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;*.toc&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;*.acn&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;*.acr&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;*.alg&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;*.glg&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;*.glo&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;*.gls&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;*.ist&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;*.fls&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;*.log&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;*.fdb_latexmk&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;*.snm&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;*.nav&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>&lt;span class="err">,&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Wechat AntiDuck</title><link>https://wyq977.github.io/p/wechat-antiduck/</link><pubDate>Fri, 13 May 2022 13:30:58 +0200</pubDate><guid>https://wyq977.github.io/p/wechat-antiduck/</guid><description>&lt;p>There&amp;rsquo;s this annoying feature on macOS that would lower the media volume when you are on a call or Facetime which appears in Wechat, Facetime or Skype. Basically, you can&amp;rsquo;t listen to YT when you are on a call.&lt;/p>
&lt;p>To avoid that, &lt;a class="link" href="https://github.com/icpz/WeChat-AntiDuck" target="_blank" rel="noopener"
>Wechat-AntiDuck&lt;/a> comes to help.&lt;/p>
&lt;h2 id="fix-no-permission-to-open">Fix &amp;ldquo;No permission to open&amp;rdquo;&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo codesign --force --deep --sign - &lt;span class="s2">&amp;#34;/Applications/WeChat.app&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>This doesn&amp;rsquo;t work with the following warning.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">/Applications/WeChat.app: the codesign_allocate helper tool cannot be found or used
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Tried re-installing the homebrew version, no luck.
Tried installing the app store version, still no luck.&lt;/p>
&lt;p>Tried following this guide: &lt;a class="link" href="https://stackoverflow.com/questions/29848622/codesign-allocate-error-unable-to-find-utility-codesign-allocate-not-a-deve" target="_blank" rel="noopener"
>https://stackoverflow.com/questions/29848622/codesign-allocate-error-unable-to-find-utility-codesign-allocate-not-a-deve&lt;/a>, still doesn&amp;rsquo;t work&lt;/p>
&lt;p>According to this &lt;a class="link" href="https://stackoverflow.com/questions/29848622/codesign-allocate-error-unable-to-find-utility-codesign-allocate-not-a-deve" target="_blank" rel="noopener"
>discussion&lt;/a>, I just copied the app to another folder, signed it and then replaced it with the one in &lt;code>/Applications&lt;/code>&lt;/p>
&lt;blockquote>
&lt;p>It&amp;rsquo;s a known bug in the codesign tool. To work around it, make a copy of your modified executable, sign the copy, then replace the original executable with the signed copy and it should work.&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>For more details, see &lt;a class="link" href="https://github.com/Homebrew/brew/issues/9082" target="_blank" rel="noopener"
>here&lt;/a>.&lt;/p>
&lt;/blockquote></description></item><item><title>Conda Homebrew</title><link>https://wyq977.github.io/p/conda-homebrew/</link><pubDate>Sun, 03 Apr 2022 09:00:36 +0200</pubDate><guid>https://wyq977.github.io/p/conda-homebrew/</guid><description>&lt;h2 id="problems">Problems&lt;/h2>
&lt;p>Miniforge installed via homebrew will remove all the env upon update/uninstall, &lt;a class="link" href="https://github.com/conda-forge/miniforge/issues/159" target="_blank" rel="noopener"
>discussion&lt;/a>.&lt;/p>
&lt;h2 id="solution">Solution&lt;/h2>
&lt;p>&lt;a class="link" href="https://docs.conda.io/projects/conda/en/latest/user-guide/configuration/use-condarc.html#specify-environment-directories-envs-dirs" target="_blank" rel="noopener"
>Specify conda env in &lt;code>condarc&lt;/code>&lt;/a>&lt;/p>
&lt;p>condarc example: &lt;a class="link" href="https://docs.conda.io/projects/conda/en/latest/user-guide/configuration/sample-condarc.html" target="_blank" rel="noopener"
>https://docs.conda.io/projects/conda/en/latest/user-guide/configuration/sample-condarc.html&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">touch ~/.condarc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir ~/.conda-envs
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">envs_dirs:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ~/.conda-envs
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Docker M1 Mac</title><link>https://wyq977.github.io/p/docker-m1-mac/</link><pubDate>Wed, 05 Jan 2022 10:48:47 +0100</pubDate><guid>https://wyq977.github.io/p/docker-m1-mac/</guid><description>&lt;h1 id="yet-again-docker-macos">Yet Again, Docker macOS&lt;/h1>
&lt;p>After using the official Docker for Mac for a while, it became clear to me that the app is not yet stable and reliable enough to be used for professional use case in the background nor user-friendly, ready-to-go like a actual desktop mac app.&lt;/p>
&lt;p>I toned down the setting and limiting the CPU to 2 cores with 4/3(?)GB RAM, and I also checked the box for using the new release virtualization framework in Experimental feature. However, the ram usage would still be going thr the limits and lagging, breakdown is also often seen. Eating roughly 4GB of RAM and I have seen errors where it said it used 30G but probably swap usage along with crashes&amp;hellip;&lt;/p>
&lt;p>As under the hook, the Docker for Mac still basically created a Linux VM, kind of like podman. The underlying performance issues might be the way the VM is regulated/managed. So, why not just create a VM and use docker cli or simply ssh to the linux instance?&lt;/p>
&lt;p>There are a bit headaches and issues with Docker on macOS.&lt;/p>
&lt;ol>
&lt;li>IO has always been a really big issue, causing really slow build and even slow git for bigger project. I never tested on new build now.&lt;/li>
&lt;li>Volume mounting.&lt;/li>
&lt;/ol>
&lt;p>Although creating your own VM will also lead to a plate of problmes such as network device/video device/volume storage mounting. But those issues are also persistant on macOS app. After all its not linux.&lt;/p>
&lt;h2 id="perfomance-issues">Perfomance issues&lt;/h2>
&lt;p>&lt;a class="link" href="https://www.lifeintech.com/2021/11/03/docker-performance-on-m1/" target="_blank" rel="noopener"
>The article&lt;/a> caught my eyes as it compares docker build time on Intel/Apple Silicon Macs with different hyperviser.&lt;/p>
&lt;p>&lt;figure
>
&lt;a href="https://www.lifeintech.com/images/posts/dockerperformanceonm101.jpg" >
&lt;img src="https://www.lifeintech.com/images/posts/dockerperformanceonm101.jpg"
loading="lazy"
alt="Test Results">
&lt;/a>
&lt;figcaption>Test Results&lt;/figcaption>
&lt;/figure>&lt;/p>
&lt;p>The Table said it all, whatever it is, the Docker for Mac makes it hard for macOS to deliver the performance it is capable of. And that last line is the one I am interested.&lt;/p>
&lt;h2 id="devicevolume-mounting-issue">device/volume mounting issue&lt;/h2>
&lt;p>For me, personally, theres a need to use the volume in Docker and that volume is not one M1&amp;rsquo;s SSD but on another network device mounted on macOS via SMB/CIFS.&lt;/p>
&lt;p>It was slow on macOS itself and it will probably take a bigger blow with all that connection protocol added on top of that with introducing VM. So I am curious about how it went going forward.&lt;/p>
&lt;h2 id="actual-set-up">Actual set up&lt;/h2>
&lt;p>&lt;a class="link" href="https://www.codeluge.com/post/setting-up-docker-on-macos-m1-arm64-to-use-debian-10.4-docker-engine/#configuring-mac-os-host-docker-cli-to-use-debians-docker-engine" target="_blank" rel="noopener"
>A detailed post on setting up UTM VM with Docker on macOS&lt;/a>&lt;/p>
&lt;p>First, install &lt;a class="link" href="https://mac.getutm.app/" target="_blank" rel="noopener"
>UTM&lt;/a>, a free and open source VM tool built only for macOS.&lt;/p>
&lt;p>A minial debian build &lt;a class="link" href="https://mac.getutm.app/gallery/debian-10-4-minimal" target="_blank" rel="noopener"
>Debian 10.4&lt;/a> were used for installing Docker, in theory, more trimming can be done to reduce the overhead on that instance.&lt;/p>
&lt;ol>
&lt;li>Remeber to change root user(root/password) and default user(debian/debian):&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo passwd root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo passwd debian
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="2">
&lt;li>Update and install essential: SSH&lt;/li>
&lt;/ol>
&lt;p>Some problems with apt-get update: &lt;a class="link" href="https://stackoverflow.com/questions/68802802/repository-http-security-debian-org-debian-security-buster-updates-inrelease" target="_blank" rel="noopener"
>https://stackoverflow.com/questions/68802802/repository-http-security-debian-org-debian-security-buster-updates-inrelease&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo apt-get update -y &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> sudo apt-get install openssl-server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># check&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl status ssh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>This confirms the SSH server is running and listening on port 22. If you need more help with that, PhoenixNap has a great tutorial on &lt;a class="link" href="https://phoenixnap.com/kb/how-to-enable-ssh-on-debian" target="_blank" rel="noopener"
>How to Enable SSH on Debian&lt;/a>.&lt;/p>
&lt;ol start="3">
&lt;li>Install Docker on Debian 10.4 VM&lt;/li>
&lt;/ol>
&lt;p>Follow: &lt;a class="link" href="https://phoenixnap.com/kb/how-to-install-docker-on-debian-10" target="_blank" rel="noopener"
>https://phoenixnap.com/kb/how-to-install-docker-on-debian-10&lt;/a>&lt;/p>
&lt;p>Change amd64 to arm64&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Step 1: Uninstall Default Docker Packages&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt-get purge docker lxc-docker docker-engine docker.io
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Step 2: Install Required Packages&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Update the default repository with the command:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt-get update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Download the following dependencies:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt-get install apt-transport-https ca-certificates curl gnupg2 software-properties-common
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Step 3: Install Docker&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Method 1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 1. Download Docker’s official GPG key to verify the integrity of packages before installing:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -fsSL https://download.docker.com/linux/debian/gpg &lt;span class="p">|&lt;/span> sudo apt-key add -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 2. Add the Docker repository to your system repository with the following command:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo add-apt-repository &lt;span class="s2">&amp;#34;deb [arch=arm64] https://download.docker.com/linux/debian buster stable&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 3. Update the apt repository:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt-get update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 4. Install Docker Engine – Community (the latest version of Docker) and containerd:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt-get install docker-ce docker-ce-cli containerd.io
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 5. The service will start automatically after the installation. Check the status by typing:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl status docker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># check if docker works&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker -v
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="config-macos-docker-cli-to-use-vms-docker-enginer">Config macos Docker CLI to use VM&amp;rsquo;s Docker Enginer&lt;/h2>
&lt;pre tabindex="0">&lt;code class="language-shel" data-lang="shel"># this should returns nothing/empty output
ssh debian@127.0.0.1 -p 22022 -N -L/tmp/docker-on-debian.sock:/var/run/docker.sock ssh://debian@127.0.0.1
# set up DOCKER_HOST location
export DOCKER_HOST=unix:///tmp/docker-on-debian.sock
&lt;/code>&lt;/pre>&lt;blockquote>
&lt;p>We’ll get “permission denied” when trying to use the Docker CLI from macOS. This is because the debian user doesn’t have permissions to use Docker without using sudo. To fix this, on the Debian VM, we’ll run the following command to add the debian user to the docker user group:&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo usermod -aG docker &lt;span class="nv">$USER&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;blockquote>
&lt;p>Now the Docker CLI will connect to the Debian VM instead. We will confirm this by running docker system info | grep System from the macOS terminal to see that the operating system is Debian, not Darwin or macOS:&lt;/p>
&lt;/blockquote>
&lt;p>Working!&lt;/p>
&lt;pre tabindex="0">&lt;code>$ docker system info
Client:
Context: default
Debug Mode: false
Server:
Containers: 0
Running: 0
Paused: 0
Stopped: 0
Images: 0
Server Version: 20.10.12
Storage Driver: overlay2
Backing Filesystem: extfs
Supports d_type: true
Native Overlay Diff: true
userxattr: false
Logging Driver: json-file
Cgroup Driver: cgroupfs
Cgroup Version: 1
Plugins:
Volume: local
Network: bridge host ipvlan macvlan null overlay
Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog
Swarm: inactive
Runtimes: runc io.containerd.runc.v2 io.containerd.runtime.v1.linux
Default Runtime: runc
Init Binary: docker-init
containerd version: 7b11cfaabd73bb80907dd23182b9347b4245eb5d
runc version: v1.0.2-0-g52b36a2
init version: de40ad0
Security Options:
apparmor
seccomp
Profile: default
Kernel Version: 4.19.0-9-arm64
Operating System: Debian GNU/Linux 10 (buster)
OSType: linux
Architecture: aarch64
CPUs: 8
Total Memory: 1.45GiB
Name: debian
ID: R5BA:KFRQ:37TY:VCYD:HPVW:NTVN:2F5L:RS4S:GLNT:CXCX:6RUJ:C6U6
Docker Root Dir: /var/lib/docker
Debug Mode: false
Registry: https://index.docker.io/v1/
Labels:
Experimental: false
Insecure Registries:
127.0.0.0/8
Live Restore Enabled: false
WARNING: No swap limit support
&lt;/code>&lt;/pre>&lt;h2 id="problems-with-utm">Problems with UTM&lt;/h2>
&lt;h3 id="ui-still-freezes-from-time-to-time-when-i-tried-to-resizeconfig-the-image-thats-annoying-af">UI still freezes from time to time when I tried to resize/config the image. Thats annoying af.&lt;/h3>
&lt;h3 id="problems-with-porting">Problems with porting:&lt;/h3>
&lt;p>It seems to I have to keep this ssh activa without CTRL+C&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ ssh debian@127.0.0.1 -p &lt;span class="m">22022&lt;/span> -N -L/tmp/docker-on-debian.sock:/var/run/docker.sock ssh://debian@127.0.0.1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>After I stopped, I need to remove sock and re-do the whole thing.&lt;/p>
&lt;p>Solution: treat the VM as remote host and modify &lt;code>DOCKER_HOST&lt;/code>, ssh create a private key and adds it to VM.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">DOCKER_HOST&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;ssh://debian@127.0.0.1:22022&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="cpu-benchmark-1000-difference-with-native-sysbench">CPU Benchmark (1000 difference with native sysbench)&lt;/h3>
&lt;p>&lt;a class="link" href="https://levelup.gitconnected.com/running-amd64-linux-on-apple-m1-with-qemu-utm-64d67cccd6f8" target="_blank" rel="noopener"
>Another post benchmark cpu using &lt;code>sysbench&lt;/code>&lt;/a>&lt;/p>
&lt;p>With a threads=2, I got 105585 in ubuntu docker&lt;/p>
&lt;pre tabindex="0">&lt;code>docker run -it --rm ubuntu
apt-get update &amp;amp;&amp;amp; apt-get install sysbench
sysbench cpu --threads=2 run
&lt;/code>&lt;/pre>&lt;pre tabindex="0">&lt;code class="language-log" data-lang="log">#### ubuntu docker (arm) on 1.5 GB ram Debian VM by UTM
CPU speed:
events per second: 21115.40
#### UTM Debian 10.4
CPU speed:
events per second: 21082.14
#### macos native
CPU speed:
events per second: 25912346.76
#### macos Intel Core i5 - 10210U
CPU speed:
events per second: 8372004.44
#### ubuntu on intel (Docker 4 CPUs 8 GB RAM swap 2 GB)
# docker -v
# Docker version 20.10.11, build dea9396
CPU speed:
events per second: 2526.18
&lt;/code>&lt;/pre>&lt;p>WTF, why is VM takes such a dramatic hit, even with the right tool. I might ended up using the Sonarr/Radarr for macOS, 4.0.0 of Radarr already has osx-arm64 build, just waiting for Sonarr.&lt;/p>
&lt;p>And yes, the QEMU used by UTM would still eat up about 2.3 GB RAM&lt;/p></description></item><item><title>Video Stuff</title><link>https://wyq977.github.io/p/video-stuff/</link><pubDate>Sun, 03 Oct 2021 16:25:14 +0200</pubDate><guid>https://wyq977.github.io/p/video-stuff/</guid><description>&lt;h2 id="quality-for-video-downloads">Quality for video downloads&lt;/h2>
&lt;p>Ref: &lt;a class="link" href="https://wiki.servarr.com/sonarr/settings#qualities-defined" target="_blank" rel="noopener"
>https://wiki.servarr.com/sonarr/settings#qualities-defined&lt;/a>&lt;/p>
&lt;p>&lt;strong>In brief:&lt;/strong> Remux == Bluray &amp;gt; WEBDL &amp;gt; WEBRip &amp;gt; HDTV&lt;/p>
&lt;p>Summary:&lt;/p>
&lt;ol>
&lt;li>WEBDL: losslessly ripped from streaming like NF, AMZN, HULU or iTunes. Quality is quite good since they are not reencoded. The video (H.264 or H.265) and audio (AC3/AAC) streams are usually extracted from the iTunes or Amazon Video and remuxed into a MKV container without sacrificing quality.&lt;/li>
&lt;li>WEBRip: the file is often extracted using the HLS or RTMP/E protocols and remuxed from a TS, MP4 or FLV container to MKV. Usually WEB-DL is better&lt;/li>
&lt;li>Bluray: A re-encode of the final released Blu-ray&lt;/li>
&lt;li>Remux: a rip of a Blu-ray or HD DVD disc to another container format or just stripping the disc of menus and bonus material while keeping the contents of its audio and video streams intact (also keeping the current codecs), guaranteeing the exact 1:1 movie quality as on original disc.&lt;/li>
&lt;li>HDTV: A re-encode of the final released Blu-ray, but broadcast over HD cable or satellite. This is released usually several months after a retail release, but sometimes upscaled versions of a Standard Definition film are released on cable channels such as STARZ or HBO, and they would be the only HD copies of that specific film available. These are generally MKV or MP4 container.&lt;/li>
&lt;/ol>
&lt;p>Quality: High -&amp;gt; Low&lt;/p>
&lt;ul>
&lt;li>2160p
&lt;ul>
&lt;li>&lt;code>Remux-2160p&lt;/code>, &lt;code>Bluray-2160p&lt;/code>, &lt;code>WEBRip-2160p&lt;/code>, &lt;code>WEBDL-2160p&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>1080p
&lt;ul>
&lt;li>&lt;code>Remux-1080p&lt;/code>, &lt;code>Bluray-1080p&lt;/code>, &lt;code>WEBRip-1080p&lt;/code>, &lt;code>WEBDL-1080p&lt;/code>, &lt;code>HDTV-1080p&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>720p
&lt;ul>
&lt;li>&lt;code>Bluray-720p&lt;/code>, &lt;code>WEBRip-720p&lt;/code>, &lt;code>HDTV-720p&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>480p or lower
&lt;ul>
&lt;li>&lt;code>DVD&lt;/code>, &lt;code>WEBRip-480p&lt;/code>, &lt;code>WEBDL-480p&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="info-about-media-files">Info. about media files&lt;/h2>
&lt;p>MKV or MP4: just a container, does not really say a lot about quality, can be converted with &lt;code>ffmepg&lt;/code> or mkvtoolnix&lt;/p>
&lt;p>TS: video format is a container format for MPEG, known as &amp;ldquo;Transport Stream&amp;rdquo;, which is used most frequently by digital broadcasting systems (digital cable, satellite, etc). &lt;a class="link" href="https://askubuntu.com/a/10596" target="_blank" rel="noopener"
>ref&lt;/a>&lt;/p></description></item><item><title>Set up Aria2 and Chrome working nicely together</title><link>https://wyq977.github.io/p/set-up-aria2-and-chrome-working-nicely-together/</link><pubDate>Wed, 29 Sep 2021 15:45:07 +0200</pubDate><guid>https://wyq977.github.io/p/set-up-aria2-and-chrome-working-nicely-together/</guid><description>&lt;h2 id="install">Install&lt;/h2>
&lt;pre tabindex="0">&lt;code>brew install aria2
&lt;/code>&lt;/pre>&lt;ol>
&lt;li>&lt;a class="link" href="https://chrome.google.com/webstore/detail/yaaw-for-chrome/dennnbdlpgjgbcjfgaohdahloollfgoc/related" target="_blank" rel="noopener"
>YAAW, aria2 frontend for chrome&lt;/a>&lt;/li>
&lt;li>Install &lt;a class="link" href="https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo?hl=en" target="_blank" rel="noopener"
>Tampermonkey&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/kkHAIKE/fake115" target="_blank" rel="noopener"
>fake115&lt;/a>, open raw link of this file &lt;a class="link" href="https://github.com/kkHAIKE/fake115/raw/master/fake115d.user.js" target="_blank" rel="noopener"
>fake115d.user.js&lt;/a>, should auto redirect to Tampermonkey&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/acgotaku/115" target="_blank" rel="noopener"
>115&lt;/a>, download release, change &lt;code>crx&lt;/code> to &lt;code>zip&lt;/code>, drag it in &lt;strong>Extensions&lt;/strong> in Chrome&lt;/li>
&lt;/ol>
&lt;h2 id="aria2-config">Aria2 config&lt;/h2>
&lt;p>Help: &lt;a class="link" href="https://developpaper.com/how-to-configure-aria2-to-download-files/" target="_blank" rel="noopener"
>https://developpaper.com/how-to-configure-aria2-to-download-files/&lt;/a>&lt;/p>
&lt;h2 id="yyaw-config">YYAW config&lt;/h2>
&lt;p>Set the RPC like this:&lt;/p>
&lt;pre tabindex="0">&lt;code>http://token:TOKEN@localhost:6800/jsonrpc
&lt;/code>&lt;/pre>&lt;h2 id="run-aria2-in-background-on-startup">Run aria2 in background on startup&lt;/h2>
&lt;p>TBD&lt;/p>
&lt;h2 id="convert-rmvb-to-mp4">Convert rmvb to mp4&lt;/h2>
&lt;p>See: &lt;a class="link" href="https://gist.github.com/jamesmacwhite/58aebfe4a82bb8d645a797a1ba975132" target="_blank" rel="noopener"
>https://gist.github.com/jamesmacwhite/58aebfe4a82bb8d645a797a1ba975132&lt;/a>&lt;/p>
&lt;pre tabindex="0">&lt;code>for f in *.rmvb; do ffmpeg -i &amp;#34;$f&amp;#34; -c:a copy -acodec copy &amp;#34;${f%}.mp4&amp;#34;; done
# use filename only
for f in *.rmvb; do ffmpeg -i &amp;#34;$f&amp;#34; -c:a copy -acodec copy -map_metadata -1 -map 0 &amp;#34;${f%%.rmvb}.mp4&amp;#34;; done
&lt;/code>&lt;/pre>&lt;p>Remove all metadata along the way:&lt;/p>
&lt;pre tabindex="0">&lt;code>ffmpeg -i in.mkv -map_metadata -1 -c copy -map 0 out.mkv
for f in *.mp4; do ffmpeg -i &amp;#34;$f&amp;#34; -map_metadata -1 -c copy -map 0 &amp;#34;${f%}.nometa.mp4&amp;#34;; done # do for loop
&lt;/code>&lt;/pre></description></item><item><title>x11 forwarding on macOS</title><link>https://wyq977.github.io/p/x11-forwarding-on-macos/</link><pubDate>Thu, 31 Dec 2020 11:42:32 +0100</pubDate><guid>https://wyq977.github.io/p/x11-forwarding-on-macos/</guid><description>&lt;h2 id="install-xquartz">Install xQuartz&lt;/h2>
&lt;p>If homebrew installed:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">brew install --cask xquartz
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Or install from &lt;a class="link" href="https://www.xquartz.org/" target="_blank" rel="noopener"
>XQuartz website&lt;/a>&lt;/p>
&lt;p>&lt;strong>Restart the machine&lt;/strong>&lt;/p>
&lt;h2 id="enable-iglx">Enable iglx&lt;/h2>
&lt;ul>
&lt;li>&lt;a class="link" href="https://scicomp.ethz.ch/wiki/Accessing_the_clusters#Mac_OS_X" target="_blank" rel="noopener"
>Euler X11 macOS&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://scicomp.ethz.ch/wiki/Getting_started_with_clusters#Troubleshooting" target="_blank" rel="noopener"
>Euler X11 macOS troubleshooting&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.visitusers.org/index.php?title=Re-enabling_INdirect_glx_on_your_X_server" target="_blank" rel="noopener"
>extra help link&lt;/a>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">defaults write org.macosforge.xquartz.X11 enable_iglx -bool &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>According to this discussion &lt;a class="link" href="https://discussions.apple.com/thread/2048176" target="_blank" rel="noopener"
>here&lt;/a>, but might not be relevant&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># check before writing&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">defaults &lt;span class="nb">read&lt;/span> com.apple.x11 nolisten_tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">defaults &lt;span class="nb">read&lt;/span> org.X.x11 nolisten_tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">defaults write com.apple.x11 nolisten_tcp -boolean &lt;span class="nb">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">defaults write org.X.x11 nolisten_tcp -boolean &lt;span class="nb">false&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>To validate:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">printenv DISPLAY
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># /private/tmp/com.apple.launchd.oyK9GxAmbh/org.macosforge.xquartz:0&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="ssh-config">SSH config&lt;/h2>
&lt;p>locate your config file, mine is at &lt;code>~/.ssh/config&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">Host euler.ethz.ch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> HostName euler.ethz.ch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> User USERNAME
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ForwardX11Trusted yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ForwardX11 yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># XAuthLocation /opt/X11/bin/xauth # not required&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="connect--debug">Connect &amp;amp; Debug&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">ssh -Y USERNAME@euler.ethz.ch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># debug&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssh -v -Y USERNAME@euler.ethz.ch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># check for &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># debug1: Requesting X11 forwarding with authentication spoofing.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># validate&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">printenv DISPLAY
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># localhost:10.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">display random.png
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># show up in the XQuartz window&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;figure
>
&lt;a href="https://wyq977.github.io/images/x11_foward_macos.png" >
&lt;img src="https://wyq977.github.io/images/x11_foward_macos.png"
loading="lazy"
>
&lt;/a>
&lt;/figure>&lt;/p>
&lt;h2 id="note">Note&lt;/h2>
&lt;p>Noted that this might conflict with some plotting software like R, matplotlib in python,&lt;/p>
&lt;p>If so, one can switch to headless mode and view&lt;/p></description></item><item><title>Sign With GPG</title><link>https://wyq977.github.io/p/sign-with-gpg/</link><pubDate>Thu, 31 Dec 2020 09:41:52 +0100</pubDate><guid>https://wyq977.github.io/p/sign-with-gpg/</guid><description>&lt;h2 id="motivation">Motivation&lt;/h2>
&lt;p>Came across this signing in &lt;a class="link" href="https://github.com/alrra/dotfiles" target="_blank" rel="noopener"
>dotfiles&lt;/a> and I would also want to have the verified in each commit I made in my pc so why not?&lt;/p>
&lt;h2 id="how-to">How-to&lt;/h2>
&lt;ol>
&lt;li>Install &lt;a class="link" href="https://gpgtools.org/" target="_blank" rel="noopener"
>GPG Suite&lt;/a> as it allows storing in macOS keychain, without typing each time
&lt;ul>
&lt;li>&lt;code>brew install --cask gpg-suite&lt;/code>&lt;/li>
&lt;li>Don&amp;rsquo;t install &lt;code>gpg&lt;/code> or &lt;code>pinentry-mac&lt;/code> as it might cause conflict and also can not be stored in keychain&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Create a key either from &lt;a class="link" href="https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/generating-a-new-gpg-key" target="_blank" rel="noopener"
>CLI&lt;/a> or in GPG Keychain app
&lt;ul>
&lt;li>Noted the name and email should be the same as the git configure&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Specify location for git
&lt;ul>
&lt;li>In &lt;code>~/.gitconfig.local&lt;/code>: modify as below&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a class="link" href="https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/adding-a-new-gpg-key-to-your-github-account" target="_blank" rel="noopener"
>Adding a new GPG key to your GitHub account&lt;/a>&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="k">[commit]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Sign commits using GPG.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># https://help.github.com/articles/signing-commits-using-gpg/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">gpgsign&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[user]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> email =
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> signingkey =
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> # signkey
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> # See https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/telling-git-about-your-signing-key&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Tell git about gpg path&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># https://gist.github.com/danieleggert/b029d44d4a54b328c0bac65d46ba4c65&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># https://github.com/pstadler/keybase-gpg-github&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">[gpg]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">program&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">/usr/local/MacGPG2/bin/gpg2&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="keep-your-email-private">Keep your email private&lt;/h2>
&lt;p>At this point, the emails I used have already been in so many projects and repo and its just a fact that this email is already &amp;ldquo;exposed&amp;rdquo;.&lt;/p>
&lt;p>You can check, see a &lt;a class="link" href="https://revoir.in/wiki/posts/git_custom_email_signed_commits/" target="_blank" rel="noopener"
>post&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># You can clone any of your favorite repository/library&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git clone https://github.com/stretchr/testify &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nb">cd&lt;/span> testify
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git log --format&lt;span class="o">=&lt;/span>email --abbrev-commit &lt;span class="p">|&lt;/span> grep -i mail &lt;span class="p">|&lt;/span> sort -u
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>The things and steps are pretty much just the same as the post but there&amp;rsquo;s one thing worth mentioning.&lt;/p>
&lt;p>In the email setting in Github, a masked email address will be generated with a format: &lt;code>NUMBER+username@github.noreply.github.com&lt;/code>. But &lt;code>username@github.noreply.github.com&lt;/code> is the one to input in GPG key, the one with a number prefix is not gonna verfy the commits and github will show errors like &amp;ldquo;No githuub user associated with the email&amp;rdquo;&lt;/p>
&lt;p>&lt;a class="link" href="https://docs.github.com/en/authentication/managing-commit-signature-verification/associating-an-email-with-your-gpg-key" target="_blank" rel="noopener"
>How to add email to gpg key&lt;/a>&lt;/p></description></item><item><title>Download qq videos</title><link>https://wyq977.github.io/p/download-qq-videos/</link><pubDate>Fri, 18 Dec 2020 18:29:33 +0100</pubDate><guid>https://wyq977.github.io/p/download-qq-videos/</guid><description>&lt;p>Mostly based on &lt;a class="link" href="https://meta.appinn.net/t/topic/13946" target="_blank" rel="noopener"
>流水账：如何使用 annie 批量下载优酷 VIP 视频&lt;/a>&lt;/p>
&lt;p>using &lt;a class="link" href="https://github.com/iawia002/annie" target="_blank" rel="noopener"
>annie&lt;/a>, &lt;a class="link" href="https://ffmpeg.org/" target="_blank" rel="noopener"
>ffmpeg&lt;/a>&lt;/p>
&lt;p>Both of them can be installed on macOS via homebrew&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">brew install annie
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">brew install ffmpeg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="get-cookies">Get cookies&lt;/h2>
&lt;ul>
&lt;li>In console (Dev. Tools): &lt;code>document.cookie&lt;/code>&lt;/li>
&lt;li>Or you can use EditThisCookie to get cookie of a vip account&lt;/li>
&lt;/ul>
&lt;h2 id="get-url">Get url&lt;/h2>
&lt;p>Copy each episode or follow the guide, grap href using online tools:http://tools.buzzstream.com/link-building-extract-urls&lt;/p>
&lt;p>It might be easier for a few episodes to just copy and paste&lt;/p>
&lt;h2 id="download">Download&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># check info&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">annie -i -f fhd -c qqvip.txt -F s01.csv
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># download fhd if present&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">annie -f fhd -c qqvip.txt -F s01.csv
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="extra">Extra&lt;/h2>
&lt;p>Most of the time is from connection and the actual download time is quite fast.&lt;/p></description></item><item><title>Test for blog but no emoji in title :(</title><link>https://wyq977.github.io/p/test-for-blog-but-no-emoji-in-title/</link><pubDate>Thu, 17 Dec 2020 22:55:41 +0100</pubDate><guid>https://wyq977.github.io/p/test-for-blog-but-no-emoji-in-title/</guid><description>&lt;img src="https://wyq977.github.io/p/test-for-blog-but-no-emoji-in-title/helena-hertz-wWZzXlDpMog-unsplash.jpg" alt="Featured image of post Test for blog but no emoji in title :(" />&lt;p>Copied from &lt;a class="link" href="https://github.com/CaiJimmy/hugo-theme-stack/tree/master/exampleSite" target="_blank" rel="noopener"
>example site&lt;/a>&lt;/p>
&lt;h2 id="test-for-a-single-post">Test for a single post&lt;/h2>
&lt;p>created by &lt;code>hugo new post/my-first-post.md&lt;/code>&lt;/p>
&lt;h2 id="test-for-emoji-support-">Test for emoji support 😄&lt;/h2>
&lt;p>😄&lt;/p>
&lt;p>Not supported in the title yet so one has to edit the layout on the theme &lt;a class="link" href="https://stackoverflow.com/questions/61753165/emoji-not-displayed-in-deployed-hugo-website-netlify" target="_blank" rel="noopener"
>stackoverflow&lt;/a>, too much trouble&amp;hellip;&lt;/p>
&lt;h2 id="math-is-still-not-perfect">Math is still not perfect&lt;/h2>
&lt;p>$$
f(x) = e^x
$$&lt;/p>
&lt;p>Multiple-line does not render nicely with KaTex now&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-md" data-lang="md">&lt;span class="line">&lt;span class="cl">$$
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">\begin{align}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">y &lt;span class="err">&amp;amp;&lt;/span>=&lt;span class="err">&amp;amp;&lt;/span> 1+1 \\\\\\
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&amp;amp;&lt;/span>=&lt;span class="err">&amp;amp;&lt;/span> 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">\end{align}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$$
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$$
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">% This works as expected in KaTeX
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">\begin{aligned}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">a &lt;span class="err">&amp;amp;&lt;/span>= 1 \\
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">b &lt;span class="err">&amp;amp;&lt;/span>= 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">\end{aligned}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$$
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>$$
\begin{align}
y &amp;amp;=&amp;amp; 1+1 \\\
&amp;amp;=&amp;amp; 2
\end{align}
$$&lt;/p>
&lt;p>$$
% This works as expected in KaTeX
\begin{aligned}
a &amp;amp;= 1 \
b &amp;amp;= 2
\end{aligned}
$$&lt;/p>
&lt;h2 id="图片">图片&lt;/h2>
&lt;p>&lt;figure
class="gallery-image"
style="
flex-grow: 66;
flex-basis: 160px"
>
&lt;a href="https://wyq977.github.io/p/test-for-blog-but-no-emoji-in-title/florian-klauer-nptLmg6jqDo-unsplash.jpg" data-size="667x1000">
&lt;img src="https://wyq977.github.io/p/test-for-blog-but-no-emoji-in-title/florian-klauer-nptLmg6jqDo-unsplash.jpg"
width="667"
height="1000"
srcset="https://wyq977.github.io/p/test-for-blog-but-no-emoji-in-title/florian-klauer-nptLmg6jqDo-unsplash_hu595aaf3b3dbbb41af5aed8d3958cc9f9_13854_480x0_resize_q75_box.jpg 480w, https://wyq977.github.io/p/test-for-blog-but-no-emoji-in-title/florian-klauer-nptLmg6jqDo-unsplash_hu595aaf3b3dbbb41af5aed8d3958cc9f9_13854_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="Photo by Florian Klauer on Unsplash">
&lt;/a>
&lt;figcaption>Photo by Florian Klauer on Unsplash&lt;/figcaption>
&lt;/figure> &lt;figure
class="gallery-image"
style="
flex-grow: 149;
flex-basis: 359px"
>
&lt;a href="https://wyq977.github.io/p/test-for-blog-but-no-emoji-in-title/luca-bravo-alS7ewQ41M8-unsplash.jpg" data-size="1000x667">
&lt;img src="https://wyq977.github.io/p/test-for-blog-but-no-emoji-in-title/luca-bravo-alS7ewQ41M8-unsplash.jpg"
width="1000"
height="667"
srcset="https://wyq977.github.io/p/test-for-blog-but-no-emoji-in-title/luca-bravo-alS7ewQ41M8-unsplash_hu0a3f1163de68d0b9471979ebf0ecf11e_32400_480x0_resize_q75_box.jpg 480w, https://wyq977.github.io/p/test-for-blog-but-no-emoji-in-title/luca-bravo-alS7ewQ41M8-unsplash_hu0a3f1163de68d0b9471979ebf0ecf11e_32400_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="Photo by Luca Bravo on Unsplash">
&lt;/a>
&lt;figcaption>Photo by Luca Bravo on Unsplash&lt;/figcaption>
&lt;/figure>&lt;/p>
&lt;p>&lt;figure
class="gallery-image"
style="
flex-grow: 133;
flex-basis: 320px"
>
&lt;a href="https://wyq977.github.io/p/test-for-blog-but-no-emoji-in-title/helena-hertz-wWZzXlDpMog-unsplash.jpg" data-size="1000x750">
&lt;img src="https://wyq977.github.io/p/test-for-blog-but-no-emoji-in-title/helena-hertz-wWZzXlDpMog-unsplash.jpg"
width="1000"
height="750"
srcset="https://wyq977.github.io/p/test-for-blog-but-no-emoji-in-title/helena-hertz-wWZzXlDpMog-unsplash_hu45a5e3ad5e058da6a00650ed8fd40bea_15530_480x0_resize_q75_box.jpg 480w, https://wyq977.github.io/p/test-for-blog-but-no-emoji-in-title/helena-hertz-wWZzXlDpMog-unsplash_hu45a5e3ad5e058da6a00650ed8fd40bea_15530_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="Photo by Helena Hertz on Unsplash">
&lt;/a>
&lt;figcaption>Photo by Helena Hertz on Unsplash&lt;/figcaption>
&lt;/figure> &lt;figure
class="gallery-image"
style="
flex-grow: 66;
flex-basis: 160px"
>
&lt;a href="https://wyq977.github.io/p/test-for-blog-but-no-emoji-in-title/hudai-gayiran-3Od_VKcDEAA-unsplash.jpg" data-size="667x1000">
&lt;img src="https://wyq977.github.io/p/test-for-blog-but-no-emoji-in-title/hudai-gayiran-3Od_VKcDEAA-unsplash.jpg"
width="667"
height="1000"
srcset="https://wyq977.github.io/p/test-for-blog-but-no-emoji-in-title/hudai-gayiran-3Od_VKcDEAA-unsplash_hub241c2a9c7a2caf7e16a2a5bbc7141ff_18711_480x0_resize_q75_box.jpg 480w, https://wyq977.github.io/p/test-for-blog-but-no-emoji-in-title/hudai-gayiran-3Od_VKcDEAA-unsplash_hub241c2a9c7a2caf7e16a2a5bbc7141ff_18711_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
alt="Photo by Hudai Gayiran on Unsplash">
&lt;/a>
&lt;figcaption>Photo by Hudai Gayiran on Unsplash&lt;/figcaption>
&lt;/figure>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-markdown" data-lang="markdown">&lt;span class="line">&lt;span class="cl">![&lt;span class="nt">Photo by Florian Klauer on Unsplash&lt;/span>](&lt;span class="na">florian-klauer-nptLmg6jqDo-unsplash.jpg&lt;/span>) ![&lt;span class="nt">Photo by Luca Bravo on Unsplash&lt;/span>](&lt;span class="na">luca-bravo-alS7ewQ41M8-unsplash.jpg&lt;/span>)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">![&lt;span class="nt">Photo by Helena Hertz on Unsplash&lt;/span>](&lt;span class="na">helena-hertz-wWZzXlDpMog-unsplash.jpg&lt;/span>) ![&lt;span class="nt">Photo by Hudai Gayiran on Unsplash&lt;/span>](&lt;span class="na">hudai-gayiran-3Od_VKcDEAA-unsplash.jpg&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Hugo ships with several &lt;a class="link" href="https://gohugo.io/content-management/shortcodes/#use-hugo-s-built-in-shortcodes" target="_blank" rel="noopener"
>Built-in Shortcodes&lt;/a> for rich content, along with a &lt;a class="link" href="https://gohugo.io/about/hugo-and-gdpr/" target="_blank" rel="noopener"
>Privacy Config&lt;/a> and a set of Simple Shortcodes that enable static and no-JS versions of various social media embeds.&lt;/p>
&lt;hr>
&lt;h2 id="youtube-privacy-enhanced-shortcode">YouTube Privacy Enhanced Shortcode&lt;/h2>
&lt;div class="video-wrapper">
&lt;iframe loading="lazy"
src="https://www.youtube.com/embed/ZJthWmvUzzc"
allowfullscreen
title="YouTube Video"
>
&lt;/iframe>
&lt;/div>
&lt;br>
&lt;hr>
&lt;h2 id="twitter-simple-shortcode">Twitter Simple Shortcode&lt;/h2>
&lt;blockquote class="twitter-tweet">&lt;p lang="en" dir="ltr">Hugo 0.24 Released: Big archetype update + &lt;a href="https://twitter.com/Netlify?ref_src=twsrc%5Etfw">@Netlify&lt;/a> _redirects etc. file support&lt;a href="https://t.co/X94FmYDEZJ">https://t.co/X94FmYDEZJ&lt;/a> &lt;a href="https://twitter.com/hashtag/gohugo?src=hash&amp;amp;ref_src=twsrc%5Etfw">#gohugo&lt;/a> &lt;a href="https://twitter.com/hashtag/golang?src=hash&amp;amp;ref_src=twsrc%5Etfw">#golang&lt;/a> &lt;a href="https://twitter.com/spf13?ref_src=twsrc%5Etfw">@spf13&lt;/a> &lt;a href="https://twitter.com/bepsays?ref_src=twsrc%5Etfw">@bepsays&lt;/a>&lt;/p>&amp;mdash; GoHugo.io (@GoHugoIO) &lt;a href="https://twitter.com/GoHugoIO/status/877500564405444608?ref_src=twsrc%5Etfw">June 21, 2017&lt;/a>&lt;/blockquote>
&lt;script async src="https://platform.twitter.com/widgets.js" charset="utf-8">&lt;/script>
&lt;br>
&lt;hr>
&lt;h2 id="vimeo-simple-shortcode">Vimeo Simple Shortcode&lt;/h2>
&lt;style>
.__h_video {
position: relative;
padding-bottom: 56.23%;
height: 0;
overflow: hidden;
width: 100%;
background: #000;
}
.__h_video img {
width: 100%;
height: auto;
color: #000;
}
.__h_video .play {
height: 72px;
width: 72px;
left: 50%;
top: 50%;
margin-left: -36px;
margin-top: -36px;
position: absolute;
cursor: pointer;
}
&lt;/style>
&lt;div class="s_video_simple __h_video">
&lt;a href="https://vimeo.com/4.8912912e&amp;#43;07" rel="noopener" target="_blank">
&lt;img src="https://i.vimeocdn.com/video/337401969-979f0cc9f55fdf305fb8984e90d92639ec9d7ecc4c9dfbc6536e28edb43784ce-d_640" srcset="https://i.vimeocdn.com/video/337401969-979f0cc9f55fdf305fb8984e90d92639ec9d7ecc4c9dfbc6536e28edb43784ce-d_640 1x, https://i.vimeocdn.com/video/337401969-979f0cc9f55fdf305fb8984e90d92639ec9d7ecc4c9dfbc6536e28edb43784ce-d_640 2x" alt="Sing Jan Swing - Kinetic Type">
&lt;div class="play">&lt;svg version="1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 61 61">&lt;circle cx="30.5" cy="30.5" r="30.5" opacity=".8" fill="#000">&lt;/circle>&lt;path d="M25.3 19.2c-2.1-1.2-3.8-.2-3.8 2.2v18.1c0 2.4 1.7 3.4 3.8 2.2l16.6-9.1c2.1-1.2 2.1-3.2 0-4.4l-16.6-9z" fill="#fff">&lt;/path>&lt;/svg>&lt;/div>&lt;/a>&lt;/div>
&lt;br>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://player.vimeo.com/video/48912912" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="vimeo video" webkitallowfullscreen mozallowfullscreen allowfullscreen>&lt;/iframe>
&lt;/div>
&lt;h2 id="bilibili-97httpsgithubcomcaijimmyhugo-theme-stackpull97">Bilibili &lt;a class="link" href="https://github.com/CaiJimmy/hugo-theme-stack/pull/97" target="_blank" rel="noopener"
>#97&lt;/a>&lt;/h2>
&lt;div class="video-wrapper">
&lt;iframe src="https://player.bilibili.com/player.html?as_wide=1&amp;amp;high_quality=1&amp;amp;page=1&amp;bvid=BV1wK4y1Y7P4"
scrolling="no"
frameborder="no"
framespacing="0"
allowfullscreen="true"
>
&lt;/iframe>
&lt;/div></description></item><item><title>itx Build</title><link>https://wyq977.github.io/p/itx-build/</link><pubDate>Wed, 18 Dec 2019 18:47:22 +0100</pubDate><guid>https://wyq977.github.io/p/itx-build/</guid><description>&lt;p>See the &lt;a class="link" href="https://pcpartpicker.com/list/tqNNYg" target="_blank" rel="noopener"
>PCPartPicker Part List&lt;/a> for detailed list including the history&lt;/p>
&lt;h2 id="build-2019-03-12">Build (2019-03-12)&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">Type&lt;/th>
&lt;th style="text-align:left">Item&lt;/th>
&lt;th style="text-align:left">Price(CHF)&lt;/th>
&lt;th style="text-align:left">Price (CNY)*&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">&lt;strong>CPU&lt;/strong>&lt;/td>
&lt;td style="text-align:left">&lt;a class="link" href="https://www.digitec.ch/en/s1/product/amd-ryzen-5-2600-am4-340ghz-unlocked-processors-8359328?supplier=406802" target="_blank" rel="noopener"
>AMD Ryzen 5 2600 3.4 GHz 6-Core Processor&lt;/a>&lt;/td>
&lt;td style="text-align:left">187&lt;/td>
&lt;td style="text-align:left">1243.55&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;strong>CPU Cooler&lt;/strong>&lt;/td>
&lt;td style="text-align:left">&lt;a class="link" href="https://pcpartpicker.com/product/VHtWGX/noctua-nh-l9x65-se-am4-cpu-cooler-nh-l9x65-se-am4" target="_blank" rel="noopener"
>Noctua NH-L9x65 SE-AM4 CPU Cooler&lt;/a>&lt;/td>
&lt;td style="text-align:left">59&lt;/td>
&lt;td style="text-align:left">392.35&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;strong>Motherboard&lt;/strong>&lt;/td>
&lt;td style="text-align:left">&lt;a class="link" href="https://pcpartpicker.com/product/gBWfrH/msi-b450i-gaming-plus-ac-mini-itx-am4-motherboard-b450i-gaming-plus-ac" target="_blank" rel="noopener"
>MSI B450I GAMING PLUS AC Mini ITX AM4 Motherboard&lt;/a>&lt;/td>
&lt;td style="text-align:left">131&lt;/td>
&lt;td style="text-align:left">871.15&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;strong>Memory&lt;/strong>&lt;/td>
&lt;td style="text-align:left">&lt;a class="link" href="https://pcpartpicker.com/product/6ntWGX/corsair-vengeance-lpx-16gb-2-x-8gb-ddr4-3000-memory-cmk16gx4m2b3000c15w" target="_blank" rel="noopener"
>Corsair Vengeance LPX 16 GB (2 x 8 GB) DDR4-3000 CL15 Memory&lt;/a>&lt;/td>
&lt;td style="text-align:left">130&lt;/td>
&lt;td style="text-align:left">864.5&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;strong>Storage&lt;/strong>&lt;/td>
&lt;td style="text-align:left">&lt;a class="link" href="https://pcpartpicker.com/product/Zxw7YJ/samsung-970-evo-plus-1-tb-m2-2280-nvme-solid-state-drive-mz-v7s1t0bam" target="_blank" rel="noopener"
>Samsung 970 Evo Plus 1 TB M.2-2280 NVME Solid State Drive&lt;/a>&lt;/td>
&lt;td style="text-align:left">238.35&lt;/td>
&lt;td style="text-align:left">1585.0275&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;strong>Video Card&lt;/strong>&lt;/td>
&lt;td style="text-align:left">&lt;a class="link" href="https://pcpartpicker.com/product/TTfmP6/msi-radeon-rx-580-8gb-armor-oc-video-card-rx-580-armor-8g-oc" target="_blank" rel="noopener"
>MSI Radeon RX 580 8 GB ARMOR OC Video Card&lt;/a>&lt;/td>
&lt;td style="text-align:left">216.96&lt;/td>
&lt;td style="text-align:left">1442.784&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;strong>Case&lt;/strong>&lt;/td>
&lt;td style="text-align:left">&lt;a class="link" href="https://louqe.com/" target="_blank" rel="noopener"
>Louqe GHOST S1 - Pangea&lt;/a>&lt;/td>
&lt;td style="text-align:left">297.85&lt;/td>
&lt;td style="text-align:left">1980.7025&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;strong>Power Supply&lt;/strong>&lt;/td>
&lt;td style="text-align:left">&lt;a class="link" href="https://www.digitec.ch/en/s1/product/corsair-sf600-600w-power-supply-computer-5802960?ipsrId=153268&amp;amp;shid=177147" target="_blank" rel="noopener"
>Corsair SF 600 W 80+ Gold Certified Fully Modular SFX Power Supply&lt;/a>&lt;/td>
&lt;td style="text-align:left">90.75&lt;/td>
&lt;td style="text-align:left">603.4875&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;strong>Monitor&lt;/strong>&lt;/td>
&lt;td style="text-align:left">&lt;a class="link" href="https://pcpartpicker.com/product/T8dFf7/dell-monitor-u2515h" target="_blank" rel="noopener"
>Dell U2515H 25.0&amp;quot; 2560x1440 60 Hz Monitor&lt;/a>&lt;/td>
&lt;td style="text-align:left">N/A&lt;/td>
&lt;td style="text-align:left">N/A&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;strong>Monitor&lt;/strong>&lt;/td>
&lt;td style="text-align:left">&lt;a class="link" href="hhttps://www.digitec.ch/en/s1/product/dell-u2715h-27-2560-x-1440-pixels-monitors-3496235" >Dell U2715H 27.0&amp;quot; 2560x1440 60 Hz Monitor&lt;/a>&lt;/td>
&lt;td style="text-align:left">399&lt;/td>
&lt;td style="text-align:left">2653.35&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;strong>Total&lt;/strong>&lt;/td>
&lt;td style="text-align:left">&lt;em>CNY are calculated at 2019-03-12&lt;/em>&lt;/td>
&lt;td style="text-align:left">&lt;strong>1749.91&lt;/strong>&lt;/td>
&lt;td style="text-align:left">&lt;strong>11636.9015&lt;/strong>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;sub> Generated by &lt;a class="link" href="https://pcpartpicker.com" target="_blank" rel="noopener"
>PCPartPicker&lt;/a> 2020-12-18 12:49 EST-0500 &lt;/sub>&lt;/p>
&lt;h2 id="update-sell">Update (sell)&lt;/h2>
&lt;ul>
&lt;li>2022-01-12: ✅ &lt;strong>68&lt;/strong> CHF for
PC Case Phanteks Eclipse P400A ATX Midi Tower on &lt;strong>tutti&lt;/strong>&lt;/li>
&lt;li>2021-03-18: ✅ &lt;strong>88&lt;/strong> CHF for
Samsung 970 on &lt;strong>Facebook&lt;/strong>&lt;/li>
&lt;li>2021-03-16: ✅ &lt;strong>38.7&lt;/strong> CHF for
Glorious PC Gaming Race model D on &lt;strong>digitec&lt;/strong>&lt;/li>
&lt;li>2021-03-15: ✅ &lt;strong>43&lt;/strong> CHF for
Corsair Vengeance LPX 16 GB on &lt;strong>digitec&lt;/strong>&lt;/li>
&lt;li>2021-03-15: ✅ &lt;strong>207.2&lt;/strong> CHF for
MSI RX580 8gb on &lt;strong>Ricardo&lt;/strong>&lt;/li>
&lt;li>2020-09-29: ✅ &lt;strong>45&lt;/strong> CHF for Corsair PSU on &lt;strong>tutti&lt;/strong>&lt;/li>
&lt;li>2020-09-25: ✅ &lt;strong>210&lt;/strong> CHF for Louqe S1 + custom PSU cable on &lt;strong>tutti&lt;/strong>&lt;/li>
&lt;li>2020-09-01: ✅ &lt;strong>200&lt;/strong> CHF for MSI B450I Gaming Plus AC + Noctua NH-L9x65 SE-AM4 + AMD Ryzen 5 2600 on &lt;strong>tutti&lt;/strong>&lt;/li>
&lt;/ul>
&lt;h2 id="update-buy">Update (buy)&lt;/h2>
&lt;ul>
&lt;li>2020-09-26: ❌ &lt;strong>24.8&lt;/strong> CHF for Microsoft 600 Englishg on &lt;a class="link" href="https://www.digitec.ch/en/s1/product/microsoft-600-eng-int-cable-keyboards-11812564" target="_blank" rel="noopener"
>&lt;strong>digitec&lt;/strong>&lt;/a>&lt;/li>
&lt;li>2020-10-18: ❌ &lt;strong>68&lt;/strong> CHF for MX Master 3 on &lt;a class="link" href="https://www.ricardo.ch/de/a/mx-master-3-ungeoeffnet-1139803814/" target="_blank" rel="noopener"
>&lt;strong>Ricardo&lt;/strong>&lt;/a>&lt;/li>
&lt;li>2020-09-26: ❌ &lt;strong>126&lt;/strong> CHF for Seasonic Focus GX (850W) on &lt;a class="link" href="https://www.digitec.ch/en/s1/product/seasonic-focus-gx-850w-pc-netzteil-12301874" target="_blank" rel="noopener"
>&lt;strong>digitec&lt;/strong>&lt;/a>&lt;/li>
&lt;li>2020-09-23: ❌ &lt;strong>80&lt;/strong> CHF for Phanteks Eclipse P400A (Midi Tower) on &lt;a class="link" href="https://www.digitec.ch/en/s1/product/phanteks-eclipse-p400a-midi-tower-pc-cases-11685782" target="_blank" rel="noopener"
>&lt;strong>digitec&lt;/strong>&lt;/a>&lt;/li>
&lt;li>2020-09-23: ❌ &lt;strong>16&lt;/strong> CHF for Gehäuselüfter Noctua 120 mm on &lt;a class="link" href="https://www.ricardo.ch/de/a/gehaeuseluefter-noctua-120-mm-1136211306/" target="_blank" rel="noopener"
>&lt;strong>Ricardo&lt;/strong>&lt;/a>&lt;/li>
&lt;li>2020-09-01: ❌ &lt;strong>123&lt;/strong> CHF ASUS ROG Strix H370-I &lt;a class="link" href="https://www.digitec.ch/en/s1/product/asus-rog-strix-h370-f-gaming-lga-1151-intel-h370-atx-motherboards-8281518" target="_blank" rel="noopener"
>&lt;strong>digitec&lt;/strong>&lt;/a>&lt;/li>
&lt;li>2020-09-01: ❌ &lt;strong>61.4&lt;/strong> CHF Intel i3 8100 &lt;a class="link" href="https://www.interdiscount.ch/de/computer-gaming/pc-komponenten/prozessoren--c581000/intel-core-i3-8100-prozessor--p0001407378" target="_blank" rel="noopener"
>&lt;strong>Interdiscount&lt;/strong>&lt;/a>&lt;/li>
&lt;li>2020-07-30: ❌ &lt;strong>52.21&lt;/strong> CHF Glorious PC Gaming Race model D (Cable) &lt;a class="link" href="https://www.digitec.ch/en/s1/product/glorious-pc-gaming-race-model-d-cable-mice-12392165" target="_blank" rel="noopener"
>&lt;strong>digitec&lt;/strong>&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Using ETH Cluster</title><link>https://wyq977.github.io/p/using-eth-cluster/</link><pubDate>Wed, 18 Dec 2019 18:47:22 +0100</pubDate><guid>https://wyq977.github.io/p/using-eth-cluster/</guid><description>&lt;h2 id="1-stay-connected-with-eth-vpn">​1. Stay connected with ETH (VPN)&lt;/h2>
&lt;p>See &lt;a class="link" href="https://ethz.ch/services/en/it-services/catalogue/networks-connections/remote.html" target="_blank" rel="noopener"
>wiki&lt;/a> for detailed info. but the bottom line is that you have to stay connected all the time and this can be troublesome in linux or mobile devices.&lt;/p>
&lt;h2 id="2-login-ssh">​2. Login (SSH)&lt;/h2>
&lt;p>It&amp;rsquo;s easier to use the ssh key for login on laptop or PC at home (&lt;a class="link" href="https://scicomp.ethz.ch/wiki/Accessing_the_clusters#SSH_keys" target="_blank" rel="noopener"
>how&lt;/a>).&lt;/p>
&lt;p>Otherwise, you should be able to login with the ETH passwords.&lt;/p>
&lt;h3 id="21-file-transfer">2.1 File transfer&lt;/h3>
&lt;p>See &lt;a class="link" href="https://www.ssh.com/ssh/sftp/" target="_blank" rel="noopener"
>here&lt;/a> for details but this should do the job for small files.&lt;/p>
&lt;ul>
&lt;li>To copy a file from &lt;code>B&lt;/code>to &lt;code>A&lt;/code> while logged into &lt;code>B&lt;/code>:
&lt;ul>
&lt;li>&lt;code>scp /path/to/file username@a:/path/to/destination&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>To copy a file from &lt;code>B&lt;/code>to &lt;code>A&lt;/code> while logged into &lt;code>A&lt;/code>:
&lt;ul>
&lt;li>&lt;code>scp username@b:/path/to/file /path/to/destination&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>​## 3. Writing code&lt;/p>
&lt;h3 id="31-jupyter-notebook">3.1 jupyter notebook&lt;/h3>
&lt;p>See: &lt;a class="link" href="https://gitlab.ethz.ch/sfux/Jupyter-on-Euler-or-Leonhard-Open" target="_blank" rel="noopener"
>https://gitlab.ethz.ch/sfux/Jupyter-on-Euler-or-Leonhard-Open&lt;/a>&lt;/p>
&lt;p>It&amp;rsquo;s quite time-consuming and clumsy for set up. Not recommended.&lt;/p>
&lt;p>One liner if have cloned the above repo:&lt;/p>
&lt;ul>
&lt;li>Euler
&lt;ul>
&lt;li>&lt;code>./start_jupyter_nb.sh Euler USERNAME 4 04:00 1024&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Leonhard Open
&lt;ul>
&lt;li>&lt;code>./start_jupyter_nb.sh LeoOpen USERNAME 4 04:00 1024&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="32-vs-code-remote-do-not-use">3.2 VS Code Remote (DO NOT USE!!!)&lt;/h3>
&lt;p>Stop using this since it will overload the single node on Euler for some reasons&lt;/p>
&lt;p>See &lt;a class="link" href="https://code.visualstudio.com/docs/remote/ssh" target="_blank" rel="noopener"
>here&lt;/a> for instructions, have to login each time with new folder, download appropriate extensions and set up &lt;code>ENV&lt;/code>variables.&lt;/p>
&lt;p>But this is still the way to go as far as I am concern. Unless the black CLI interface works better for you.&lt;/p>
&lt;h3 id="33-cli">3.3 CLI&lt;/h3>
&lt;p>Good old ways of coding with Vim or nano (installed needed)&lt;/p>
&lt;h2 id="4-batch-system">​4. Batch system&lt;/h2>
&lt;h3 id="41-module-for-environments">4.1 Module for environments&lt;/h3>
&lt;p>&lt;a class="link" href="https://scicomp.ethz.ch/wiki/Getting_started_with_clusters#Module_commands" target="_blank" rel="noopener"
>Details&lt;/a>&lt;/p>
&lt;p>One can also write this in &lt;code>~/.bash_rc&lt;/code> to load the modules needed every-time before login, but not recommended by Euler since the module will affect the batch system when submitting jobs&lt;/p>
&lt;p>Common ones:&lt;/p>
&lt;ul>
&lt;li>list current loaded modules files
&lt;ul>
&lt;li>&lt;code>module list&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>unload &lt;strong>all&lt;/strong>currently loaded modules
&lt;ul>
&lt;li>&lt;code>module purge&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>unload&lt;/code>works similarly with &lt;code>load&lt;/code>&lt;/li>
&lt;li>python 3.7.1
&lt;ul>
&lt;li>&lt;code>module load new gcc/4.8.2 python/3.6.1 &lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>python 3.6.1
&lt;ul>
&lt;li>&lt;code>module load new gcc/4.8.2 python/3.6.1 &lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>R 3.6.0
&lt;ul>
&lt;li>&lt;code>module load new gcc/4.8.2 r/3.6.0 &lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>Extra info. for python packages&lt;/p>
&lt;p>Packages can be installed in a per-user basis using &lt;code>pip install --user package&lt;/code>&lt;a class="link" href="https://scicomp.ethz.ch/wiki/Python#Installing_a_Python_package.2C_using_PIP" target="_blank" rel="noopener"
>details here&lt;/a>&lt;/p>
&lt;h3 id="42-batch-job-submission">4.2 Batch job submission&lt;/h3>
&lt;p>&lt;strong>Job monitoring (&lt;a class="link" href="https://scicomp.ethz.ch/wiki/FAQ%23Monitoring_jobs" target="_blank" rel="noopener"
>more&lt;/a>)&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Real time output&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">bpeek JOBID
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">bpeek -J JOBNAME
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>kill a job &lt;code>bkill JOBID&lt;/code>****kill all &lt;code>bkill 0&lt;/code>&lt;/li>
&lt;li>Check all jobs &lt;code>bjobs&lt;/code>(&lt;code>-p&lt;/code>for pending jobs only)&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Job submission(&lt;a class="link" href="https://scicomp.ethz.ch/wiki/FAQ#Submitting_jobs" target="_blank" rel="noopener"
>more&lt;/a>)&lt;/strong>&lt;/p>
&lt;p>After loading modules files, &lt;code>-n&lt;/code>specify number of cores
requested, notify you by e-mail when your job begins and ends using
&lt;code>bsub -B&lt;/code>and &lt;code>bsub -N&lt;/code>respectively&lt;/p>
&lt;p>Example:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">bsub -B -N -n &lt;span class="m">4&lt;/span> -W &lt;span class="m">120&lt;/span> -R &lt;span class="s2">&amp;#34;rusage[mem=2048]&amp;#34;&lt;/span> -o output.txt python main.py
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">bsub -B -N -n &lt;span class="m">4&lt;/span> -W &lt;span class="m">120&lt;/span> -o output.txt python main.py
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Taichi installation for Apple Silicon</title><link>https://wyq977.github.io/p/taichi-installation-for-apple-silicon/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://wyq977.github.io/p/taichi-installation-for-apple-silicon/</guid><description>&lt;h2 id="conda-env">conda env&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">conda create -n taichi &lt;span class="nv">python&lt;/span>&lt;span class="o">=&lt;/span>3.8
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="install-dependencies">Install Dependencies&lt;/h2>
&lt;p>See &lt;a class="link" href="https://www.anaconda.com/blog/using-pip-in-a-conda-environment" target="_blank" rel="noopener"
>best practice using pip in a conda&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">conda activate taichi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">python3 -m pip install setuptools astor pybind11 pylint &lt;span class="c1"># sourceinspect&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">python3 -m pip install pytest pytest-rerunfailures pytest-xdist yapf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">python3 -m pip install GitPython coverage colorama &lt;span class="c1"># autograd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># install pypi packages with no whl avaiable for Apple Arm64&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">python3 -m pip install numpy autograd sourceinspect --compile --pre
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="build-llvm-1000-from-source">Build LLVM 10.0.0 from source&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">wget https://github.com/llvm/llvm-project/releases/download/llvmorg-10.0.0/llvm-10.0.0.src.tar.xz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tar xvJf llvm-10.0.0.src.tar.xz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> llvm-10.0.0.src
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir build
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> build
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># install to specific location&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># https://llvm.org/docs/CMake.html&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cmake .. &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -DLLVM_ENABLE_RTTI:BOOL&lt;span class="o">=&lt;/span>ON &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -DBUILD_SHARED_LIBS:BOOL&lt;span class="o">=&lt;/span>OFF &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -DCMAKE_BUILD_TYPE&lt;span class="o">=&lt;/span>Release &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -DLLVM_TARGETS_TO_BUILD&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;AArch64&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -DLLVM_ENABLE_ASSERTIONS&lt;span class="o">=&lt;/span>ON &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -DCMAKE_INSTALL_PREFIX&lt;span class="o">=&lt;/span>/Users/wyq977/projects/llvm-install/10.0.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">make -j &lt;span class="m">8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">make install
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Check your LLVM installation&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># You should get 10.0.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">llvm-config --version
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="build-taichi">Build Taichi&lt;/h2>
&lt;p>Installing collected packages: numpy
WARNING: The scripts f2py, f2py3 and f2py3.8 are installed in &amp;lsquo;/Users/wyq977/.local/bin&amp;rsquo; which is not on PATH.
Consider adding this directory to PATH or, if you prefer to suppress this warning, use &amp;ndash;no-warn-script-location.
Successfully installed numpy-1.20.2&lt;/p>
&lt;p>astor
sourceinspect
pytest-rerunfailures
pytest-xdist
yapf
GitPython
coverage
colorama
autograd&lt;/p>
&lt;p>721 brew install cmake
723 cmake &amp;ndash;version
724 cmake ..
726 cmake ..
746 cmake ..
747 cmake .. -DTI_WITH_CUDA=OFF -DTI_WITH_OPENGL=OFF -DTI_WITH_CC=OFF
763 cd cmake/&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">cmake .. -DTI_WITH_CUDA&lt;span class="o">=&lt;/span>OFF -DTI_WITH_OPENGL&lt;span class="o">=&lt;/span>OFF -DTI_WITH_CC&lt;span class="o">=&lt;/span>OFF -DLLVM_TARGETS_TO_BUILD&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;AArch64&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="llvm-build-from-source">LLVM (build from source)&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">wget https://github.com/llvm/llvm-project/releases/download/llvmorg-10.0.0/llvm-10.0.0.src.tar.xz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tar xvJf llvm-10.0.0.src.tar.xz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> llvm-10.0.0.src
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir build
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> build
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cmake .. -DLLVM_ENABLE_RTTI:BOOL&lt;span class="o">=&lt;/span>ON -DBUILD_SHARED_LIBS:BOOL&lt;span class="o">=&lt;/span>OFF -DCMAKE_BUILD_TYPE&lt;span class="o">=&lt;/span>Release -DLLVM_TARGETS_TO_BUILD&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;AArch64&amp;#34;&lt;/span> -DLLVM_ENABLE_ASSERTIONS&lt;span class="o">=&lt;/span>ON
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">make -j &lt;span class="m">8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># install llvm in custom dir instead of /&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">make &lt;span class="nv">DESTDIR&lt;/span>&lt;span class="o">=&lt;/span>~/Downloads/llvm-install/ install
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># add this to bash_profile&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># export PATH=&amp;#34;/Users/wyq977/Downloads/llvm-install/usr/local/bin:$PATH&amp;#34; &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># export LLVM_DIR=&amp;#34;/Users/wyq977/Downloads/llvm-install/usr/local/lib/cmake&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Check your LLVM installation&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">llvm-config --version &lt;span class="c1"># You should get 10.0.0&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="uninstall">Uninstall&lt;/h2>
&lt;ul>
&lt;li>Make a CMake target: &lt;a class="link" href="https://gitlab.kitware.com/cmake/community/-/wikis/FAQ#can-i-do-make-uninstall-with-cmake" target="_blank" rel="noopener"
>https://gitlab.kitware.com/cmake/community/-/wikis/FAQ#can-i-do-make-uninstall-with-cmake&lt;/a>&lt;/li>
&lt;li>remove all build target:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> build &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> xargs rm &amp;lt; install_manifest.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Unset all env var&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">unset&lt;/span> TAICHI_REPO_DIR
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">unset&lt;/span> LLVM_DIR
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item></channel></rss>