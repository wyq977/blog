<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="​1. Stay connected with ETH (VPN) See wiki for detailed info. but the bottom line is that you have to stay connected all the time and this can be troublesome in linux or mobile devices.
​2. Login (SSH) It&amp;rsquo;s easier to use the ssh key for login on laptop or PC at home (how).
Otherwise, you should be able to login with the ETH passwords.
2.1 File transfer See here for details but this should do the job for small files."><title>Using ETH Cluster</title><link rel=canonical href=https://example.com/p/using-eth-cluster/><link rel=stylesheet href=/scss/style.min.css><meta property="og:title" content="Using ETH Cluster"><meta property="og:description" content="​1. Stay connected with ETH (VPN) See wiki for detailed info. but the bottom line is that you have to stay connected all the time and this can be troublesome in linux or mobile devices.
​2. Login (SSH) It&amp;rsquo;s easier to use the ssh key for login on laptop or PC at home (how).
Otherwise, you should be able to login with the ETH passwords.
2.1 File transfer See here for details but this should do the job for small files."><meta property="og:url" content="https://example.com/p/using-eth-cluster/"><meta property="og:site_name" content="My Blog"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:published_time" content="2019-12-18T18:47:22+01:00"><meta property="article:modified_time" content="2019-12-18T18:47:22+01:00"><meta name=twitter:title content="Using ETH Cluster"><meta name=twitter:description content="​1. Stay connected with ETH (VPN) See wiki for detailed info. but the bottom line is that you have to stay connected all the time and this can be troublesome in linux or mobile devices.
​2. Login (SSH) It&amp;rsquo;s easier to use the ssh key for login on laptop or PC at home (how).
Otherwise, you should be able to login with the ETH passwords.
2.1 File transfer See here for details but this should do the job for small files."></head><body><div class="container flex on-phone--column align-items--flex-start extended article-page with-toolbar"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header class=site-info><h1 class=site-name><a href=https://example.com>My Blog</a></h1><h2 class=site-description>Just a blog mostly for archives</h2></header><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/about><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>About</span></a></li><li><a href=/archives><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/search><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li></ol></aside><main class="main full-width"><div id=article-toolbar><a href=https://example.com class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg><span>Back</span></a></div><article class=main-article><header class=article-header><div class=article-details><h2 class=article-title><a href=/p/using-eth-cluster/>Using ETH Cluster</a></h2><footer class=article-time><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--published>Dec 18, 2019</time></footer></div></header><section class=article-content><h2 id=1-stay-connected-with-eth-vpn>​1. Stay connected with ETH (VPN)</h2><p>See <a class=link href=https://ethz.ch/services/en/it-services/catalogue/networks-connections/remote.html target=_blank rel=noopener>wiki</a> for detailed info. but the bottom line is that you have to stay connected all the time and this can be troublesome in linux or mobile devices.</p><h2 id=2-login-ssh>​2. Login (SSH)</h2><p>It&rsquo;s easier to use the ssh key for login on laptop or PC at home (<a class=link href=https://scicomp.ethz.ch/wiki/Accessing_the_clusters#SSH_keys target=_blank rel=noopener>how</a>).</p><p>Otherwise, you should be able to login with the ETH passwords.</p><h3 id=21-file-transfer>2.1 File transfer</h3><p>See <a class=link href=https://www.ssh.com/ssh/sftp/ target=_blank rel=noopener>here</a> for details but this should do the job for small files.</p><ul><li>To copy a file from <code>B</code>to <code>A</code> while logged into <code>B</code>:<ul><li><code>scp /path/to/file username@a:/path/to/destination</code></li></ul></li><li>To copy a file from <code>B</code>to <code>A</code> while logged into <code>A</code>:<ul><li><code>scp username@b:/path/to/file /path/to/destination</code></li></ul></li></ul><p>​## 3. Writing code</p><h3 id=31-jupyter-notebook>3.1 jupyter notebook</h3><p>See: <a href=https://gitlab.ethz.ch/sfux/Jupyter-on-Euler-or-Leonhard-Open>https://gitlab.ethz.ch/sfux/Jupyter-on-Euler-or-Leonhard-Open</a></p><p>It&rsquo;s quite time-consuming and clumsy for set up. Not recommended.</p><p>One liner if have cloned the above repo:</p><ul><li>Euler<ul><li><code>./start_jupyter_nb.sh Euler USERNAME 4 04:00 1024</code></li></ul></li><li>Leonhard Open<ul><li><code>./start_jupyter_nb.sh LeoOpen USERNAME 4 04:00 1024</code></li></ul></li></ul><h3 id=32-vs-code-remote-do-not-use>3.2 VS Code Remote (DO NOT USE!!!)</h3><p>Stop using this since it will overload the single node on Euler for some reasons</p><p>See <a class=link href=https://code.visualstudio.com/docs/remote/ssh target=_blank rel=noopener>here</a> for instructions, have to login each time with new folder, download appropriate extensions and set up <code>ENV</code>variables.</p><p>But this is still the way to go as far as I am concern. Unless the black CLI interface works better for you.</p><h3 id=33-cli>3.3 CLI</h3><p>Good old ways of coding with Vim or nano (installed needed)</p><h2 id=4-batch-system>​4. Batch system</h2><h3 id=41-module-for-environments>4.1 Module for environments</h3><p><a class=link href=https://scicomp.ethz.ch/wiki/Getting_started_with_clusters#Module_commands target=_blank rel=noopener>Details</a></p><p>One can also write this in <code>~/.bash_rc</code> to load the modules needed every-time before login, but not recommended by Euler since the module will affect the batch system when submitting jobs</p><p>Common ones:</p><ul><li>list current loaded modules files<ul><li><code>module list</code></li></ul></li><li>unload <strong>all</strong>currently loaded modules<ul><li><code>module purge</code></li></ul></li><li><code>unload</code>works similarly with <code>load</code></li><li>python 3.7.1<ul><li><code>module load new gcc/4.8.2 python/3.6.1</code></li></ul></li><li>python 3.6.1<ul><li><code>module load new gcc/4.8.2 python/3.6.1</code></li></ul></li><li>R 3.6.0<ul><li><code>module load new gcc/4.8.2 r/3.6.0</code></li></ul></li></ul><p>Extra info. for python packages</p><p>Packages can be installed in a per-user basis using <code>pip install --user package</code><a class=link href=https://scicomp.ethz.ch/wiki/Python#Installing_a_Python_package.2C_using_PIP target=_blank rel=noopener>details here</a></p><h3 id=42-batch-job-submission>4.2 Batch job submission</h3><p><strong>Job monitoring (<a class=link href=https://scicomp.ethz.ch/wiki/FAQ%23Monitoring_jobs target=_blank rel=noopener>more</a>)</strong></p><ul><li>Real time output</li></ul><div class=highlight><pre class=chroma><code class=language-shell data-lang=shell>bpeek JOBID
</code></pre></div><div class=highlight><pre class=chroma><code class=language-shell data-lang=shell>bpeek -J JOBNAME
</code></pre></div><ul><li>kill a job <code>bkill JOBID</code>****kill all <code>bkill 0</code></li><li>Check all jobs <code>bjobs</code>(<code>-p</code>for pending jobs only)</li></ul><p><strong>Job submission(<a class=link href=https://scicomp.ethz.ch/wiki/FAQ#Submitting_jobs target=_blank rel=noopener>more</a>)</strong></p><p>After loading modules files, <code>-n</code>specify number of cores
requested, notify you by e-mail when your job begins and ends using
<code>bsub -B</code>and <code>bsub -N</code>respectively</p><p>Example:</p><div class=highlight><pre class=chroma><code class=language-shell data-lang=shell>bsub -B -N -n <span class=m>4</span> -W <span class=m>120</span> -R <span class=s2>&#34;rusage[mem=2048]&#34;</span> -o output.txt python main.py
</code></pre></div><div class=highlight><pre class=chroma><code class=language-shell data-lang=shell>bsub -B -N -n <span class=m>4</span> -W <span class=m>120</span> -o output.txt python main.py
</code></pre></div></section><footer class=article-footer><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css integrity=sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js integrity=sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4 crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js integrity=sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa crossorigin=anonymous onload="renderMathInElement(document.querySelector(`.article-content`));"></script></article><aside class=related-contents--wrapper></aside><footer class=site-footer><section class=copyright>&copy; 2020 My Blog</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=1.1.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true style=display:none><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const customFont=document.createElement('link');customFont.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";customFont.type="text/css";customFont.rel="stylesheet";document.head.appendChild(customFont);}());</script><link rel=stylesheet href=/css/highlight/light.min.css media="(prefers-color-scheme: light)"><link rel=stylesheet href=/css/highlight/dark.min.css media="(prefers-color-scheme: dark)"></body></html>