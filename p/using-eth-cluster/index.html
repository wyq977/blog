<!doctype html><html lang=en-us>
<head><meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="​1. Stay connected with ETH (VPN) See wiki for detailed info. but the bottom line is that you have to stay connected all the time and this can be troublesome in linux or mobile devices.
​2. Login (SSH) It&amp;rsquo;s easier to use the ssh key for login on laptop or PC at home (how).
Otherwise, you should be able to login with the ETH passwords.
2.1 File transfer See here for details but this should do the job for small files."><title>Using ETH Cluster</title>
<link rel=canonical href=https://wyq977.github.io/p/using-eth-cluster/>
<link rel=stylesheet href=/scss/style.min.css><meta property="og:title" content="Using ETH Cluster">
<meta property="og:description" content="​1. Stay connected with ETH (VPN) See wiki for detailed info. but the bottom line is that you have to stay connected all the time and this can be troublesome in linux or mobile devices.
​2. Login (SSH) It&amp;rsquo;s easier to use the ssh key for login on laptop or PC at home (how).
Otherwise, you should be able to login with the ETH passwords.
2.1 File transfer See here for details but this should do the job for small files.">
<meta property="og:url" content="https://wyq977.github.io/p/using-eth-cluster/">
<meta property="og:site_name" content="My Blog">
<meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="eth"><meta property="article:tag" content="server"><meta property="article:published_time" content="2019-12-18T18:47:22+01:00"><meta property="article:modified_time" content="2019-12-18T18:47:22+01:00">
<meta name=twitter:title content="Using ETH Cluster">
<meta name=twitter:description content="​1. Stay connected with ETH (VPN) See wiki for detailed info. but the bottom line is that you have to stay connected all the time and this can be troublesome in linux or mobile devices.
​2. Login (SSH) It&amp;rsquo;s easier to use the ssh key for login on laptop or PC at home (how).
Otherwise, you should be able to login with the ETH passwords.
2.1 File transfer See here for details but this should do the job for small files.">
</head>
<body class="article-page has-toc">
<script>(function(){const a='StackColorScheme';localStorage.setItem(a,"auto")})()</script><script>(function(){const b='StackColorScheme',a=localStorage.getItem(b),c=window.matchMedia('(prefers-color-scheme: dark)').matches===!0;a=='dark'||a==='auto'&&c?document.documentElement.dataset.scheme='dark':document.documentElement.dataset.scheme='light'})()</script>
<div class="container main-container flex
extended">
<div id=article-toolbar>
<a href=https://wyq977.github.io class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg>
<span>Back</span>
</a>
</div>
<main class="main full-width">
<article class=main-article>
<header class=article-header>
<div class=article-details>
<header class=article-category>
<a href=/categories/guide/ style=background-color:#0177b8;color:#fff>
Guide
</a>
</header>
<h2 class=article-title>
<a href=/p/using-eth-cluster/>Using ETH Cluster</a>
</h2>
<footer class=article-time>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Dec 18, 2019</time>
</div>
</footer>
</div>
</header>
<section class=article-content>
<h2 id=1-stay-connected-with-eth-vpn>​1. Stay connected with ETH (VPN)</h2>
<p>See <a class=link href=https://ethz.ch/services/en/it-services/catalogue/networks-connections/remote.html target=_blank rel=noopener>wiki</a> for detailed info. but the bottom line is that you have to stay connected all the time and this can be troublesome in linux or mobile devices.</p>
<h2 id=2-login-ssh>​2. Login (SSH)</h2>
<p>It&rsquo;s easier to use the ssh key for login on laptop or PC at home (<a class=link href=https://scicomp.ethz.ch/wiki/Accessing_the_clusters#SSH_keys target=_blank rel=noopener>how</a>).</p>
<p>Otherwise, you should be able to login with the ETH passwords.</p>
<h3 id=21-file-transfer>2.1 File transfer</h3>
<p>See <a class=link href=https://www.ssh.com/ssh/sftp/ target=_blank rel=noopener>here</a> for details but this should do the job for small files.</p>
<ul>
<li>To copy a file from <code>B</code>to <code>A</code> while logged into <code>B</code>:
<ul>
<li><code>scp /path/to/file username@a:/path/to/destination</code></li>
</ul>
</li>
<li>To copy a file from <code>B</code>to <code>A</code> while logged into <code>A</code>:
<ul>
<li><code>scp username@b:/path/to/file /path/to/destination</code></li>
</ul>
</li>
</ul>
<p>​## 3. Writing code</p>
<h3 id=31-jupyter-notebook>3.1 jupyter notebook</h3>
<p>See: <a class=link href=https://gitlab.ethz.ch/sfux/Jupyter-on-Euler-or-Leonhard-Open target=_blank rel=noopener>https://gitlab.ethz.ch/sfux/Jupyter-on-Euler-or-Leonhard-Open</a></p>
<p>It&rsquo;s quite time-consuming and clumsy for set up. Not recommended.</p>
<p>One liner if have cloned the above repo:</p>
<ul>
<li>Euler
<ul>
<li><code>./start_jupyter_nb.sh Euler USERNAME 4 04:00 1024</code></li>
</ul>
</li>
<li>Leonhard Open
<ul>
<li><code>./start_jupyter_nb.sh LeoOpen USERNAME 4 04:00 1024</code></li>
</ul>
</li>
</ul>
<h3 id=32-vs-code-remote-do-not-use>3.2 VS Code Remote (DO NOT USE!!!)</h3>
<p>Stop using this since it will overload the single node on Euler for some reasons</p>
<p>See <a class=link href=https://code.visualstudio.com/docs/remote/ssh target=_blank rel=noopener>here</a> for instructions, have to login each time with new folder, download appropriate extensions and set up <code>ENV</code>variables.</p>
<p>But this is still the way to go as far as I am concern. Unless the black CLI interface works better for you.</p>
<h3 id=33-cli>3.3 CLI</h3>
<p>Good old ways of coding with Vim or nano (installed needed)</p>
<h2 id=4-batch-system>​4. Batch system</h2>
<h3 id=41-module-for-environments>4.1 Module for environments</h3>
<p><a class=link href=https://scicomp.ethz.ch/wiki/Getting_started_with_clusters#Module_commands target=_blank rel=noopener>Details</a></p>
<p>One can also write this in <code>~/.bash_rc</code> to load the modules needed every-time before login, but not recommended by Euler since the module will affect the batch system when submitting jobs</p>
<p>Common ones:</p>
<ul>
<li>list current loaded modules files
<ul>
<li><code>module list</code></li>
</ul>
</li>
<li>unload <strong>all</strong>currently loaded modules
<ul>
<li><code>module purge</code></li>
</ul>
</li>
<li><code>unload</code>works similarly with <code>load</code></li>
<li>python 3.7.1
<ul>
<li><code>module load new gcc/4.8.2 python/3.6.1 </code></li>
</ul>
</li>
<li>python 3.6.1
<ul>
<li><code>module load new gcc/4.8.2 python/3.6.1 </code></li>
</ul>
</li>
<li>R 3.6.0
<ul>
<li><code>module load new gcc/4.8.2 r/3.6.0 </code></li>
</ul>
</li>
</ul>
<p>Extra info. for python packages</p>
<p>Packages can be installed in a per-user basis using <code>pip install --user package</code><a class=link href=https://scicomp.ethz.ch/wiki/Python#Installing_a_Python_package.2C_using_PIP target=_blank rel=noopener>details here</a></p>
<h3 id=42-batch-job-submission>4.2 Batch job submission</h3>
<p><strong>Job monitoring (<a class=link href=https://scicomp.ethz.ch/wiki/FAQ%23Monitoring_jobs target=_blank rel=noopener>more</a>)</strong></p>
<ul>
<li>Real time output</li>
</ul>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell>bpeek JOBID
</code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell>bpeek -J JOBNAME
</code></pre></div><ul>
<li>kill a job <code>bkill JOBID</code>****kill all <code>bkill 0</code></li>
<li>Check all jobs <code>bjobs</code>(<code>-p</code>for pending jobs only)</li>
</ul>
<p><strong>Job submission(<a class=link href=https://scicomp.ethz.ch/wiki/FAQ#Submitting_jobs target=_blank rel=noopener>more</a>)</strong></p>
<p>After loading modules files, <code>-n</code>specify number of cores
requested, notify you by e-mail when your job begins and ends using
<code>bsub -B</code>and <code>bsub -N</code>respectively</p>
<p>Example:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell>bsub -B -N -n <span class=m>4</span> -W <span class=m>120</span> -R <span class=s2>&#34;rusage[mem=2048]&#34;</span> -o output.txt python main.py
</code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell>bsub -B -N -n <span class=m>4</span> -W <span class=m>120</span> -o output.txt python main.py
</code></pre></div>
</section>
<footer class=article-footer>
<section class=article-tags>
<a href=/tags/eth/>eth</a>
<a href=/tags/server/>server</a>
</section>
<section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span>
</section>
</footer>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css integrity=sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js integrity=sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8 crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js integrity=sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.querySelector(`.article-content`),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script>
</article>
<aside class=related-contents--wrapper>
<h2 class=section-title>Related contents</h2>
<div class=related-contents>
<div class="flex article-list--tile">
<article>
<a href=/p/x11-forwarding-on-macos/>
<div class=article-details>
<h2 class=article-title>x11 forwarding on macOS</h2>
</div>
</a>
</article>
<article>
<a href=/p/set-up-aria2-and-chrome-working-nicely-together/>
<div class=article-details>
<h2 class=article-title>Set up Aria2 and Chrome working nicely together</h2>
</div>
</a>
</article>
<article>
<a href=/p/sign-with-gpg/>
<div class=article-details>
<h2 class=article-title>Sign With GPG</h2>
</div>
</a>
</article>
<article>
<a href=/p/download-qq-videos/>
<div class=article-details>
<h2 class=article-title>Download qq videos</h2>
</div>
</a>
</article>
<article class=has-image>
<a href=/p/test-for-blog-but-no-emoji-in-title/>
<div class=article-image>
<img src=/p/test-for-blog-but-no-emoji-in-title/_hu45a5e3ad5e058da6a00650ed8fd40bea_15530_27040ddd7399aaf289c0ce70ee6592d9.jpg width=250 height=150 loading=lazy data-key data-hash="md5-RvYejqai34/Fvx0koXxEpg==">
</div>
<div class=article-details>
<h2 class=article-title>Test for blog but no emoji in title :(</h2>
</div>
</a>
</article>
</div>
</div>
</aside>
<footer class=site-footer>
<section class=copyright>
&copy;
2022 My Blog
</section>
<section class=powerby>
Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> <br>
Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.2.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a>
</section>
</footer>
<div class=pswp tabindex=-1 role=dialog aria-hidden=true>
<div class=pswp__bg></div>
<div class=pswp__scroll-wrap>
<div class=pswp__container>
<div class=pswp__item></div>
<div class=pswp__item></div>
<div class=pswp__item></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class=pswp__top-bar>
<div class=pswp__counter></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<div class=pswp__preloader>
<div class=pswp__preloader__icn>
<div class=pswp__preloader__cut>
<div class=pswp__preloader__donut></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class=pswp__share-tooltip></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class=pswp__caption>
<div class=pswp__caption__center></div>
</div>
</div>
</div>
</div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous>
</main>
<aside class="sidebar right-sidebar sticky">
<section class="widget archives">
<div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
</div>
<h2 class="widget-title section-title">Table of contents</h2>
<div class=widget--toc>
<nav id=TableOfContents>
<ol>
<li><a href=#1-stay-connected-with-eth-vpn>​1. Stay connected with ETH (VPN)</a></li>
<li><a href=#2-login-ssh>​2. Login (SSH)</a>
<ol>
<li><a href=#21-file-transfer>2.1 File transfer</a></li>
<li><a href=#31-jupyter-notebook>3.1 jupyter notebook</a></li>
<li><a href=#32-vs-code-remote-do-not-use>3.2 VS Code Remote (DO NOT USE!!!)</a></li>
<li><a href=#33-cli>3.3 CLI</a></li>
</ol>
</li>
<li><a href=#4-batch-system>​4. Batch system</a>
<ol>
<li><a href=#41-module-for-environments>4.1 Module for environments</a></li>
<li><a href=#42-batch-job-submission>4.2 Batch job submission</a></li>
</ol>
</li>
</ol>
</nav>
</div>
</section>
</aside>
</div>
<script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous defer></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const a=document.createElement('link');a.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",a.type="text/css",a.rel="stylesheet",document.head.appendChild(a)})()</script>
</body>
</html>