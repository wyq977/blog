<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="\u200b1. Stay connected with ETH (VPN) See wiki for detailed info. but the bottom line is that you have to stay connected all the time and this can be troublesome in linux or mobile devices.\n\u200b2. Login (SSH) It&rsquo;s easier to use the ssh key for login on laptop or PC at home (how).\nOtherwise, you should be able to login with the ETH passwords.\n2.1 File transfer See here for details but this should do the job for small files.\n"><title>Using ETH Cluster</title>
<link rel=canonical href=https://wyq977.github.io/blog/p/using-eth-cluster/><link rel=stylesheet href=/blog/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css><meta property='og:title' content="Using ETH Cluster"><meta property='og:description' content="\u200b1. Stay connected with ETH (VPN) See wiki for detailed info. but the bottom line is that you have to stay connected all the time and this can be troublesome in linux or mobile devices.\n\u200b2. Login (SSH) It&rsquo;s easier to use the ssh key for login on laptop or PC at home (how).\nOtherwise, you should be able to login with the ETH passwords.\n2.1 File transfer See here for details but this should do the job for small files.\n"><meta property='og:url' content='https://wyq977.github.io/blog/p/using-eth-cluster/'><meta property='og:site_name' content="Yongqi Wang's Blog"><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='eth'><meta property='article:tag' content='server'><meta property='article:published_time' content='2019-12-18T18:47:22+01:00'><meta property='article:modified_time' content='2019-12-18T18:47:22+01:00'><meta name=twitter:title content="Using ETH Cluster"><meta name=twitter:description content="\u200b1. Stay connected with ETH (VPN) See wiki for detailed info. but the bottom line is that you have to stay connected all the time and this can be troublesome in linux or mobile devices.\n\u200b2. Login (SSH) It&rsquo;s easier to use the ssh key for login on laptop or PC at home (how).\nOtherwise, you should be able to login with the ETH passwords.\n2.1 File transfer See here for details but this should do the job for small files.\n"></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><div class=site-meta><h1 class=site-name><a href=/blog>Yongqi Wang's Blog</a></h1><h2 class=site-description></h2></div></header><ol class=menu-social><li><a href=https://github.com/wyq977 target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/blog/ target=_blank><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/blog/about><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#1-stay-connected-with-eth-vpn>​1. Stay connected with ETH (VPN)</a></li><li><a href=#2-login-ssh>​2. Login (SSH)</a><ol><li><a href=#21-file-transfer>2.1 File transfer</a></li><li><a href=#31-jupyter-notebook>3.1 jupyter notebook</a></li><li><a href=#32-vs-code-remote-do-not-use>3.2 VS Code Remote (DO NOT USE!!!)</a></li><li><a href=#33-cli>3.3 CLI</a></li></ol></li><li><a href=#4-batch-system>​4. Batch system</a><ol><li><a href=#41-module-for-environments>4.1 Module for environments</a></li><li><a href=#42-batch-job-submission>4.2 Batch job submission</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/blog/categories/guide/ style=background-color:#0177b8;color:#fff>Guide</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/blog/p/using-eth-cluster/>Using ETH Cluster</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Dec 18, 2019</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>2 minute read</time></div></footer></div></header><section class=article-content><h2 id=1-stay-connected-with-eth-vpn>​1. Stay connected with ETH (VPN)</h2><p>See <a class=link href=https://ethz.ch/services/en/it-services/catalogue/networks-connections/remote.html target=_blank rel=noopener>wiki</a> for detailed info. but the bottom line is that you have to stay connected all the time and this can be troublesome in linux or mobile devices.</p><h2 id=2-login-ssh>​2. Login (SSH)</h2><p>It&rsquo;s easier to use the ssh key for login on laptop or PC at home (<a class=link href=https://scicomp.ethz.ch/wiki/Accessing_the_clusters#SSH_keys target=_blank rel=noopener>how</a>).</p><p>Otherwise, you should be able to login with the ETH passwords.</p><h3 id=21-file-transfer>2.1 File transfer</h3><p>See <a class=link href=https://www.ssh.com/ssh/sftp/ target=_blank rel=noopener>here</a> for details but this should do the job for small files.</p><ul><li>To copy a file from <code>B</code>to <code>A</code> while logged into <code>B</code>:<ul><li><code>scp /path/to/file username@a:/path/to/destination</code></li></ul></li><li>To copy a file from <code>B</code>to <code>A</code> while logged into <code>A</code>:<ul><li><code>scp username@b:/path/to/file /path/to/destination</code></li></ul></li></ul><p>​## 3. Writing code</p><h3 id=31-jupyter-notebook>3.1 jupyter notebook</h3><p>See: <a class=link href=https://gitlab.ethz.ch/sfux/Jupyter-on-Euler-or-Leonhard-Open target=_blank rel=noopener>https://gitlab.ethz.ch/sfux/Jupyter-on-Euler-or-Leonhard-Open</a></p><p>It&rsquo;s quite time-consuming and clumsy for set up. Not recommended.</p><p>One liner if have cloned the above repo:</p><ul><li>Euler<ul><li><code>./start_jupyter_nb.sh Euler USERNAME 4 04:00 1024</code></li></ul></li><li>Leonhard Open<ul><li><code>./start_jupyter_nb.sh LeoOpen USERNAME 4 04:00 1024</code></li></ul></li></ul><h3 id=32-vs-code-remote-do-not-use>3.2 VS Code Remote (DO NOT USE!!!)</h3><p>Stop using this since it will overload the single node on Euler for some reasons</p><p>See <a class=link href=https://code.visualstudio.com/docs/remote/ssh target=_blank rel=noopener>here</a> for instructions, have to login each time with new folder, download appropriate extensions and set up <code>ENV</code>variables.</p><p>But this is still the way to go as far as I am concern. Unless the black CLI interface works better for you.</p><h3 id=33-cli>3.3 CLI</h3><p>Good old ways of coding with Vim or nano (installed needed)</p><h2 id=4-batch-system>​4. Batch system</h2><h3 id=41-module-for-environments>4.1 Module for environments</h3><p><a class=link href=https://scicomp.ethz.ch/wiki/Getting_started_with_clusters#Module_commands target=_blank rel=noopener>Details</a></p><p>One can also write this in <code>~/.bash_rc</code> to load the modules needed every-time before login, but not recommended by Euler since the module will affect the batch system when submitting jobs</p><p>Common ones:</p><ul><li>list current loaded modules files<ul><li><code>module list</code></li></ul></li><li>unload <strong>all</strong>currently loaded modules<ul><li><code>module purge</code></li></ul></li><li><code>unload</code>works similarly with <code>load</code></li><li>python 3.7.1<ul><li><code>module load new gcc/4.8.2 python/3.6.1</code></li></ul></li><li>python 3.6.1<ul><li><code>module load new gcc/4.8.2 python/3.6.1</code></li></ul></li><li>R 3.6.0<ul><li><code>module load new gcc/4.8.2 r/3.6.0</code></li></ul></li></ul><p>Extra info. for python packages</p><p>Packages can be installed in a per-user basis using <code>pip install --user package</code><a class=link href=https://scicomp.ethz.ch/wiki/Python#Installing_a_Python_package.2C_using_PIP target=_blank rel=noopener>details here</a></p><h3 id=42-batch-job-submission>4.2 Batch job submission</h3><p><strong>Job monitoring (<a class=link href=https://scicomp.ethz.ch/wiki/FAQ%23Monitoring_jobs target=_blank rel=noopener>more</a>)</strong></p><ul><li>Real time output</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>bpeek JOBID
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>bpeek -J JOBNAME
</span></span></code></pre></td></tr></table></div></div><ul><li>kill a job <code>bkill JOBID</code>****kill all <code>bkill 0</code></li><li>Check all jobs <code>bjobs</code>(<code>-p</code>for pending jobs only)</li></ul><p><strong>Job submission(<a class=link href=https://scicomp.ethz.ch/wiki/FAQ#Submitting_jobs target=_blank rel=noopener>more</a>)</strong></p><p>After loading modules files, <code>-n</code>specify number of cores
requested, notify you by e-mail when your job begins and ends using
<code>bsub -B</code>and <code>bsub -N</code>respectively</p><p>Example:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>bsub -B -N -n <span class=m>4</span> -W <span class=m>120</span> -R <span class=s2>&#34;rusage[mem=2048]&#34;</span> -o output.txt python main.py
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>bsub -B -N -n <span class=m>4</span> -W <span class=m>120</span> -o output.txt python main.py
</span></span></code></pre></td></tr></table></div></div></section><footer class=article-footer><section class=article-tags><a href=/blog/tags/eth/>Eth</a>
<a href=/blog/tags/server/>Server</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/blog/p/x11-forwarding-on-macos/><div class=article-details><h2 class=article-title>x11 Forwarding on macOS</h2></div></a></article><article><a href=/blog/p/macos-chinese-font/><div class=article-details><h2 class=article-title>macOS Chinese Font</h2></div></a></article><article><a href=/blog/p/ios-games-on-apple-silicon-macs/><div class=article-details><h2 class=article-title>iOS Games on Apple Silicon Macs</h2></div></a></article><article><a href=/blog/p/macos-cron/><div class=article-details><h2 class=article-title>macOS CRON</h2></div></a></article><article><a href=/blog/p/filter-on-a-per-app-basis-on-ios/><div class=article-details><h2 class=article-title>Filter on a per-app basis on iOS</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2020 -
2025 Yongqi Wang's Blog</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.29.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/blog/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>