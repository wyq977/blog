(()=>{const v=function(a){return new Promise(b=>{var c=document.createElement("script");c.src=a,c.onload=()=>{b()},document.head.appendChild(c)})},w=function(a){return new Promise(b=>{var c=document.createElement("link");c.href=a,c.type="text/css",c.rel="stylesheet",c.onload=()=>{b()},document.head.appendChild(c)})};var F=function(a){for(var b=function(i){for(var h=i.childNodes,f=h.length,n=[],j,p,k,l,m=0;m<f;m++){j=h[m];if(j.nodeType!==1)continue;p=j.children[0],k=p.getAttribute("data-size").split("x"),l={src:p.getAttribute("href"),w:parseInt(k[0],10),h:parseInt(k[1],10)},j.children.length>1&&(l.title=j.children[1].innerHTML),p.children.length>0&&(l.msrc=p.children[0].getAttribute("src")),l.el=j,n.push(l)}return n},c=function i(h,f){return h&&(f(h)?h:i(h.parentNode,f))},d=function(i){i=i||window.event,i.preventDefault?i.preventDefault():i.returnValue=!1;var h=i.target||i.srcElement,f=c(h,function(t){return t.tagName&&t.tagName.toUpperCase()==="FIGURE"});if(!f)return;for(var n=f.parentNode,j=f.parentNode.childNodes,p=j.length,k=0,l,m=0;m<p;m++){if(j[m].nodeType!==1)continue;if(j[m]===f){l=k;break}k++}return l>=0&&g(l,n),!1},e=function(){var i=window.location.hash.substring(1),h={};if(i.length<5)return h;for(var f=i.split("&"),n=0;n<f.length;n++){if(!f[n])continue;var j=f[n].split("=");if(j.length<2)continue;h[j[0]]=j[1]}return h.gid&&(h.gid=parseInt(h.gid,10)),h},g=function(i,h,f,n){var j=document.querySelectorAll(".pswp")[0],p,k,l;l=b(h),k={galleryUID:h.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(t){var K=l[t].el.getElementsByTagName("img")[0],L=window.pageYOffset||document.documentElement.scrollTop,y=K.getBoundingClientRect();return{x:y.left,y:y.top+L,w:y.width}}};if(n)if(k.galleryPIDs){for(var m=0;m<l.length;m++)if(l[m].pid==i){k.index=m;break}}else k.index=parseInt(i,10)-1;else k.index=parseInt(i,10);if(isNaN(k.index))return;f&&(k.showAnimationDuration=0),p=new PhotoSwipe(j,PhotoSwipeUI_Default,l,k),p.init()},o=document.querySelectorAll(a),q=0,x=o.length;q<x;q++)o[q].setAttribute("data-pswp-uid",q+1),o[q].onclick=d;var s=e();s.pid&&s.gid&&g(s.pid,o[s.gid-1],!0,!0)};function A(a){let b=document.createElement("div");b.className="gallery";let c=a[0].parentNode,d=a[0];c.insertBefore(b,d);for(let e=0;e<a.length;++e){const g=a[e].querySelector("img").width,o=a[e].querySelector("img").height;a[e].style.flexGrow=`${g*100/o}`,a[e].style.flexBasis=`${g*240/o}px`,b.appendChild(a[e])}}function G(){const a=[v("https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"),v("https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"),w("https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"),w("https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css")];return Promise.all(a)}function B(a){const b=document.querySelector(a).querySelectorAll("figure");if(b.length){let c=[b[0]];for(let d=1;d<b.length;++d)b[d].previousElementSibling===c[c.length-1]?c.push(b[d]):(A(c),c=[b[d]]);c.length>0&&A(c),G().then(()=>{const d=document.querySelector(".pswp");d.style.removeProperty("display"),F(`${a} .gallery`)})}}let r={};if(localStorage.hasOwnProperty("StackColorsCache"))try{r=JSON.parse(localStorage.getItem("StackColorsCache"))}catch(a){r={}}async function u(a,b,c){if(!a)return await Vibrant.from(c).getPalette();if(!r.hasOwnProperty(a)||r[a].hash!==b){const d=await Vibrant.from(c).getPalette();r[a]={hash:b,Vibrant:{hex:d.Vibrant.hex,rgb:d.Vibrant.rgb,bodyTextColor:d.Vibrant.bodyTextColor},DarkMuted:{hex:d.DarkMuted.hex,rgb:d.DarkMuted.rgb,bodyTextColor:d.DarkMuted.bodyTextColor}},localStorage.setItem("StackColorsCache",JSON.stringify(r))}return r[a]}let H=(a,b=500)=>{a.classList.add("transiting"),a.style.transitionProperty="height, margin, padding",a.style.transitionDuration=b+"ms",a.style.height=a.offsetHeight+"px",a.offsetHeight,a.style.overflow="hidden",a.style.height="0",a.style.paddingTop="0",a.style.paddingBottom="0",a.style.marginTop="0",a.style.marginBottom="0",window.setTimeout(()=>{a.classList.remove("show"),a.style.removeProperty("height"),a.style.removeProperty("padding-top"),a.style.removeProperty("padding-bottom"),a.style.removeProperty("margin-top"),a.style.removeProperty("margin-bottom"),a.style.removeProperty("overflow"),a.style.removeProperty("transition-duration"),a.style.removeProperty("transition-property"),a.classList.remove("transiting")},b)},I=(a,b=500)=>{a.classList.add("transiting"),a.style.removeProperty("display"),a.classList.add("show");let c=a.offsetHeight;a.style.overflow="hidden",a.style.height="0",a.style.paddingTop="0",a.style.paddingBottom="0",a.style.marginTop="0",a.style.marginBottom="0",a.offsetHeight,a.style.transitionProperty="height, margin, padding",a.style.transitionDuration=b+"ms",a.style.height=c+"px",a.style.removeProperty("padding-top"),a.style.removeProperty("padding-bottom"),a.style.removeProperty("margin-top"),a.style.removeProperty("margin-bottom"),window.setTimeout(()=>{a.style.removeProperty("height"),a.style.removeProperty("overflow"),a.style.removeProperty("transition-duration"),a.style.removeProperty("transition-property"),a.classList.remove("transiting")},b)},J=(a,b=500)=>window.getComputedStyle(a).display==="none"?I(a,b):H(a,b);function C(){const a=document.getElementById("toggle-menu");a&&a.addEventListener("click",()=>{if(document.getElementById("main-menu").classList.contains("transiting"))return;document.body.classList.toggle("show-menu"),J(document.getElementById("main-menu"),300),a.classList.toggle("is-active")})}function E(a,b,c){var d=document.createElement(a);for(let e in b)if(e&&b.hasOwnProperty(e)){let g=b[e];e=="dangerouslySetInnerHTML"?d.innerHTML=g.__html:g===!0?d.setAttribute(e,e):g!==!1&&g!=null&&d.setAttribute(e,g.toString())}for(let e=2;e<arguments.length;e++){let g=arguments[e];g&&d.appendChild(g.nodeType==null?document.createTextNode(g.toString()):g)}return d}var z=E;let D={init:()=>{C(),document.querySelector(".article-content")&&B(".article-content"),document.querySelectorAll(".color-tag").forEach(async b=>{const c=b.getAttribute("data-image"),d=b.getAttribute("data-key"),e=b.getAttribute("data-hash"),g=await u(d,e,c);b.style.color=g.Vibrant.bodyTextColor,b.style.background=g.Vibrant.hex});const a=document.querySelector(".article-list--tile");if(a){let b=new IntersectionObserver(async(c,d)=>{c.forEach(e=>{if(!e.isIntersecting)return;d.unobserve(e.target);const g=e.target.querySelectorAll("article.has-image");g.forEach(async o=>{const q=o.querySelector("img"),x=q.src,s=q.getAttribute("data-key"),i=q.getAttribute("data-hash"),h=o.querySelector(".article-details"),f=await u(s,i,x);h.style.background=`
                        linear-gradient(0deg, 
                            rgba(${f.DarkMuted.rgb[0]}, ${f.DarkMuted.rgb[1]}, ${f.DarkMuted.rgb[2]}, 0.5) 0%, 
                            rgba(${f.Vibrant.rgb[0]}, ${f.Vibrant.rgb[1]}, ${f.Vibrant.rgb[2]}, 0.75) 100%)`})})});b.observe(a)}}};window.addEventListener("load",()=>{setTimeout(function(){D.init()},0)});window.Stack=D;window.createElement=z;})();
/*!
*   Hugo Theme Stack
*
*   @author: Jimmy Cai
*   @website: https://jimmycai.com
*   @link: https://github.com/CaiJimmy/hugo-theme-stack
*/
